import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import t from"node:http";import u from"node:https";import{EventEmitter as a}from"node:events";import{Buffer as c}from"node:buffer";import{createHash as D}from"node:crypto";import{formatWithOptions as l}from"node:util";import{resolve as d,dirname as h,join as f,sep as F}from"node:path";import g from"node:process";import*as m from"node:tty";import{createRequire as y}from"node:module";import{promises as E,existsSync as C}from"node:fs";const b=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,_=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,v=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const u=e.trim();if(u.length<=9)switch(u.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!v.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(b.test(e)||_.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(u){if(t.strict)throw u;return e}}const A=/#/g,B=/&/g,R=/\//g,S=/=/g,T=/\+/g,k=/%5e/gi,$=/%60/gi,x=/%7c/gi,O=/%20/gi;function encodeQueryValue(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace(x,"|")).replace(T,"%2B").replace(O,"+").replace(A,"%23").replace(B,"%26").replace($,"`").replace(k,"^").replace(R,"%2F");var t}function encodeQueryKey(e){return encodeQueryValue(e).replace(S,"%3D")}function decode(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryValue(e){return decode(e.replace(T," "))}function parseQuery(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const u of e.split("&")){const e=u.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const a=decode(e[1].replace(T," "));if("__proto__"===a||"constructor"===a)continue;const c=decodeQueryValue(e[2]||"");void 0===t[a]?t[a]=c:Array.isArray(t[a])?t[a].push(c):t[a]=[t[a],c]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return u=t,"number"!=typeof(a=e[t])&&"boolean"!=typeof a||(a=String(a)),a?Array.isArray(a)?a.map((e=>`${encodeQueryKey(u)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(u)}=${encodeQueryValue(a)}`:encodeQueryKey(u);var u,a})).filter(Boolean).join("&")}const I=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,j=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,L=/^([/\\]\s*){2,}[^/\\]/,H=/^[\s\0]*(blob|data|javascript|vbscript):$/i,P=/\/$|\/\?|\/#/,M=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?I.test(e):j.test(e)||!!t.acceptRelative&&L.test(e)}function isScriptProtocol(e){return!!e&&H.test(e)}function hasTrailingSlash(e="",t){return t?P.test(e):e.endsWith("/")}function withoutTrailingSlash(e="",t){if(!t)return(hasTrailingSlash(e)?e.slice(0,-1):e)||"/";if(!hasTrailingSlash(e,!0))return e||"/";let u=e,a="";const c=e.indexOf("#");-1!==c&&(u=e.slice(0,c),a=e.slice(c));const[D,...l]=u.split("?");return((D.endsWith("/")?D.slice(0,-1):D)||"/")+(l.length>0?`?${l.join("?")}`:"")+a}function withTrailingSlash(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(hasTrailingSlash(e,!0))return e||"/";let u=e,a="";const c=e.indexOf("#");if(-1!==c&&(u=e.slice(0,c),a=e.slice(c),!u))return a;const[D,...l]=u.split("?");return D+"/"+(l.length>0?`?${l.join("?")}`:"")+a}function withLeadingSlash(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}function withBase(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const u=withoutTrailingSlash(t);return e.startsWith(u)?e:joinURL(u,e)}function withoutBase(e,t){if(isEmptyURL(t))return e;const u=withoutTrailingSlash(t);if(!e.startsWith(u))return e;const a=e.slice(u.length);return"/"===a[0]?a:"/"+a}function withQuery(e,t){const u=parseURL(e),a={...parseQuery(u.search),...t};return u.search=stringifyQuery(a),function(e){const t=e.pathname||"",u=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",a=e.hash||"",c=e.auth?e.auth+"@":"",D=e.host||"",l=e.protocol||e[N]?(e.protocol||"")+"//":"";return l+c+D+t+u+a}(u)}function getQuery$1(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let u=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(u){const t=e.replace(M,"");u=withTrailingSlash(u)+t}else u=e;return u}function joinRelativeURL(...e){const t=/\/(?!\/)/,u=e.filter(Boolean),a=[];let c=0;for(const e of u)if(e&&"/"!==e)for(const[u,D]of e.split(t).entries())if(D&&"."!==D)if(".."!==D)1===u&&a[a.length-1]?.endsWith(":/")?a[a.length-1]+="/"+D:(a.push(D),c++);else{if(1===a.length&&hasProtocol(a[0]))continue;a.pop(),c--}let D=a.join("/");return c>=0?u[0]?.startsWith("/")&&!D.startsWith("/")?D="/"+D:u[0]?.startsWith("./")&&!D.startsWith("./")&&(D="./"+D):D="../".repeat(-1*c)+D,u[u.length-1]?.endsWith("/")&&!D.endsWith("/")&&(D+="/"),D}const N=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const u=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(u){const[,e,t=""]=u;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return parsePath(e);const[,a="",c,D=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,l="",d=""]=D.match(/([^#/?]*)(.*)?/)||[];"file:"===a&&(d=d.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:h,search:f,hash:F}=parsePath(d);return{protocol:a.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:l,pathname:h,search:f,hash:F,[N]:!a}}function parsePath(e=""){const[t="",u="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:u,hash:a}}const U=0,q=1,z=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const u in e.routes)insert(t,normalizeTrailingSlash(u),e.routes[u]);return{ctx:t,lookup:e=>function(e,t){const u=e.staticRoutesMap[t];if(u)return u.data;const a=t.split("/"),c={};let D=!1,l=null,d=e.rootNode,h=null;for(let e=0;e<a.length;e++){const t=a[e];null!==d.wildcardChildNode&&(l=d.wildcardChildNode,h=a.slice(e).join("/"));const u=d.children.get(t);if(void 0===u){if(d&&d.placeholderChildren.length>1){const t=a.length-e;d=d.placeholderChildren.find((e=>e.maxDepth===t))||null}else d=d.placeholderChildren[0]||null;if(!d)break;d.paramName&&(c[d.paramName]=t),D=!0}else d=u}null!==d&&null!==d.data||null===l||(d=l,c[d.paramName||"_"]=h,D=!0);if(!d)return null;if(D)return{...d.data,params:D?c:void 0};return d.data}(t,normalizeTrailingSlash(e)),insert:(e,u)=>insert(t,normalizeTrailingSlash(e),u),remove:e=>function(e,t){let u=!1;const a=t.split("/");let c=e.rootNode;for(const e of a)if(c=c.children.get(e),!c)return u;if(c.data){const e=a.at(-1)||"";c.data=null,0===Object.keys(c.children).length&&c.parent&&(c.parent.children.delete(e),c.parent.wildcardChildNode=null,c.parent.placeholderChildren=[]),u=!0}return u}(t,normalizeTrailingSlash(e))}}function insert(e,t,u){let a=!0;const c=t.split("/");let D=e.rootNode,l=0;const d=[D];for(const e of c){let t;if(t=D.children.get(e))D=t;else{const u=getNodeType(e);t=createRadixNode({type:u,parent:D}),D.children.set(e,t),u===z?(t.paramName="*"===e?"_"+l++:e.slice(1),D.placeholderChildren.push(t),a=!1):u===q&&(D.wildcardChildNode=t,t.paramName=e.slice(3)||"_",a=!1),d.push(t),D=t}}for(const[e,t]of d.entries())t.maxDepth=Math.max(d.length-e,t.maxDepth||0);return D.data=u,!0===a&&(e.staticRoutesMap[t]=D),D}function createRadixNode(e={}){return{type:e.type||U,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?q:":"===e[0]||"*"===e?z:U}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:u=>_matchRoutes(u,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,u){!0!==u&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const a=[];for(const[u,c]of _sortRoutesMap(t.wildcard))(e===u||e.startsWith(u+"/"))&&a.push(c);for(const[u,c]of _sortRoutesMap(t.dynamic))if(e.startsWith(u+"/")){const t="/"+e.slice(u.length).split("/").splice(2).join("/");a.push(..._matchRoutes(t,c))}const c=t.static.get(e);return c&&a.push(c),a.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const u={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==U||e.includes("*")||e.includes(":")){if(t.type===q)u.wildcard.set(e.replace("/**",""),t.data);else if(t.type===z){const a=_routerNodeToTable("",t);return t.data&&a.static.set("/",t.data),void u.dynamic.set(e.replace(/\/\*|\/:\w+/,""),a)}}else t.data&&u.static.set(e,t.data);for(const[u,a]of t.children.entries())_addNode(`${e}/${u}`.replace("//","/"),a)}(e,t),u}function isPlainObject$2(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu$1(e,t,u=".",a){if(!isPlainObject$2(t))return _defu$1(e,{},u,a);const c=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const D=e[t];null!=D&&(a&&a(c,t,D,u)||(Array.isArray(D)&&Array.isArray(c[t])?c[t]=[...D,...c[t]]:isPlainObject$2(D)&&isPlainObject$2(c[t])?c[t]=_defu$1(D,c[t],(u?`${u}.`:"")+t.toString(),a):c[t]=D))}return c}function createDefu$1(e){return(...t)=>t.reduce(((t,u)=>_defu$1(t,u,"",e)),{})}const W=createDefu$1(),K=createDefu$1(((e,t,u)=>{if(void 0!==e[t]&&"function"==typeof u)return e[t]=u(e[t]),!0}));function o$1(e){throw new Error(`${e} is not implemented yet!`)}let J=class i extends a{__unenv__={};readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new i(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw o$1("Readable.asyncIterator")}iterator(e){throw o$1("Readable.iterator")}map(e,t){throw o$1("Readable.map")}filter(e,t){throw o$1("Readable.filter")}forEach(e,t){throw o$1("Readable.forEach")}reduce(e,t,u){throw o$1("Readable.reduce")}find(e,t){throw o$1("Readable.find")}findIndex(e,t){throw o$1("Readable.findIndex")}some(e,t){throw o$1("Readable.some")}toArray(e){throw o$1("Readable.toArray")}every(e,t){throw o$1("Readable.every")}flatMap(e,t){throw o$1("Readable.flatMap")}drop(e,t){throw o$1("Readable.drop")}take(e,t){throw o$1("Readable.take")}asIndexedPairs(e){throw o$1("Readable.asIndexedPairs")}},V=class extends a{__unenv__={};writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,u){if(this.writableEnded)u&&u();else{if(void 0===this._data)this._data=e;else{const u="string"==typeof this._data?c.from(this._data,this._encoding||t||"utf8"):this._data,a="string"==typeof e?c.from(e,t||this._encoding||"utf8"):e;this._data=c.concat([u,a])}this._encoding=t,u&&u()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,u){const a="string"==typeof t?this._encoding:"utf8",c="function"==typeof t?t:"function"==typeof u?u:void 0;return this._write(e,a,c),!0}setDefaultEncoding(e){return this}end(e,t,u){const a="function"==typeof e?e:"function"==typeof t?t:"function"==typeof u?u:void 0;if(this.writableEnded)return a&&a(),this;const c=e===a?void 0:e;if(c){const e=t===a?void 0:t;this.write(c,e,a)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("Method not implemented.")}};const Q=class{allowHalfOpen=!0;_destroy;constructor(e=new J,t=new V){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const u of e)u(...t)}}(e._destroy,t._destroy)}};const G=(Object.assign(Q.prototype,J.prototype),Object.assign(Q.prototype,V.prototype),Q);let Y=class extends G{__unenv__={};bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,u){return!1}connect(e,t,u){return this}end(e,t,u){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}},Z=class extends J{aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new Y}get rawHeaders(){const e=this.headers,t=[];for(const u in e)if(Array.isArray(e[u]))for(const a of e[u])t.push(u,a);else t.push(u,e[u]);return t}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return p(this.headers)}get trailersDistinct(){return p(this.trailers)}};function p(e){const t={};for(const[u,a]of Object.entries(e))u&&(t[u]=(Array.isArray(a)?a:[a]).filter(Boolean));return t}class w extends V{statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,u){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const a=u||t;if(a&&!Array.isArray(a))for(const e in a)this.setHeader(e,a[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const u=this._headers[e],a=[...Array.isArray(u)?u:[u],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=a.length>1?a:a[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}setHeaders(e){for(const[t,u]of Object.entries(e))this.setHeader(t,u);return this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}}const X=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function S$1(e={}){if(e instanceof Headers)return e;const t=new Headers;for(const[u,a]of Object.entries(e))if(void 0!==a){if(Array.isArray(a)){for(const e of a)t.append(u,String(e));continue}t.set(u,String(a))}return t}const ee=new Set([101,204,205,304]);async function b$1(e,t){const u=new Z,a=new w(u);let c;if(u.url=t.url?.toString()||"/",!u.url.startsWith("/")){const e=new URL(u.url);c=e.host,u.url=e.pathname+e.search+e.hash}u.method=t.method||"GET",u.headers=function(e={}){const t=new X,u=Array.isArray(e)||function(e){return"function"==typeof e?.entries}(e)?e:Object.entries(e);for(const[e,a]of u)if(a){if(void 0===t[e]){t[e]=a;continue}t[e]=[...Array.isArray(t[e])?t[e]:[t[e]],...Array.isArray(a)?a:[a]]}return t}(t.headers||{}),u.headers.host||(u.headers.host=t.host||c||"localhost"),u.connection.encrypted=u.connection.encrypted||"https"===t.protocol,u.body=t.body||null,u.__unenv__=t.context,await e(u,a);let D=a._data;(ee.has(a.statusCode)||"HEAD"===u.method.toUpperCase())&&(D=null,delete a._headers["content-length"]);const l={status:a.statusCode,statusText:a.statusMessage,headers:a._headers,body:D};return u.destroy(),a.destroy(),l}function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError$1(e){if("string"==typeof e)return new H3Error(e);if(isError(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError(e){return!0===e?.constructor?.__h3_error__}function getQuery(e){return getQuery$1(e.path||"")}function getRequestHeaders(e){const t={};for(const u in e.node.req.headers){const a=e.node.req.headers[u];t[u]=Array.isArray(a)?a.filter(Boolean).join(", "):a}return t}function getRequestURL(e,t={}){const u=function(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"];if(t)return t}return e.node.req.headers.host||"localhost"}(e,t),a=function(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}(e,t),c=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(c,`${a}://${u}`)}const te=Symbol.for("h3RawBody"),re=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError$1({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,re);const u=e._requestBody||e.web?.request?.body||e.node.req[te]||e.node.req.rawBody||e.node.req.body;if(u){const e=Promise.resolve(u).then((e=>Buffer.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,u)=>{const a=[];e.pipeTo(new WritableStream({write(e){a.push(e)},close(){t(Buffer.concat(a))},abort(e){u(e)}})).catch(u)})):"function"==typeof e.pipe?new Promise(((t,u)=>{const a=[];e.on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))})).on("error",u)})):e.constructor===Object?Buffer.from(JSON.stringify(e)):e instanceof URLSearchParams?Buffer.from(e.toString()):e instanceof FormData?new Response(e).bytes().then((e=>Buffer.from(e))):Buffer.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||"")&&!String(e.node.req.headers["transfer-encoding"]??"").split(",").map((e=>e.trim())).filter(Boolean).includes("chunked"))return Promise.resolve(void 0);const a=e.node.req[te]=new Promise(((t,u)=>{const a=[];e.node.req.on("error",(e=>{u(e)})).on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))}))}));return t?a.then((e=>e.toString(t))):a}function handleCacheHeaders(e,t){const u=["public",...t.cacheControls||[]];let a=!1;if(void 0!==t.maxAge&&u.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const u=new Date(t.modifiedTime),c=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",u.toUTCString()),c&&new Date(c)>=u&&(a=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(a=!0)}return e.node.res.setHeader("cache-control",u.join(", ")),!!a&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const oe={html:"text/html",json:"application/json"},ne=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(ne,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let u,a,c,D,l,d=0;const skipWhitespace=()=>{for(;d<e.length&&/\s/.test(e.charAt(d));)d+=1;return d<e.length};for(;d<e.length;){for(u=d,l=!1;skipWhitespace();)if(a=e.charAt(d),","===a){for(c=d,d+=1,skipWhitespace(),D=d;d<e.length&&(a=e.charAt(d),"="!==a&&";"!==a&&","!==a);)d+=1;d<e.length&&"="===e.charAt(d)?(l=!0,d=D,t.push(e.slice(u,c)),u=d):d=c+1}else d+=1;(!l||d>=e.length)&&t.push(e.slice(u))}return t}const se="undefined"==typeof setImmediate?e=>e():setImmediate;function send(e,t,u){return u&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,u),new Promise((u=>{se((()=>{e.handled||e.node.res.end(t),u()}))}))}function setResponseStatus(e,t,u){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),u&&(e.node.res.statusMessage=sanitizeStatusMessage(u))}function getResponseStatus(e){return e.node.res.statusCode}function getResponseStatusText(e){return e.node.res.statusMessage}function setResponseHeaders(e,t){for(const[u,a]of Object.entries(t))e.node.res.setHeader(u,a)}const ue=setResponseHeaders;function setResponseHeader(e,t,u){e.node.res.setHeader(t,u)}function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((u,a)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),u()})),t.on("error",(e=>{a(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[u,a]of t.headers)"set-cookie"===u?e.node.res.appendHeader(u,splitCookiesString(a)):e.node.res.setHeader(u,a);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const ie=new Set(["PATCH","POST","PUT","DELETE"]),ae=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,u={}){let a,c;ie.has(e.method)&&(u.streamRequest?(a=function(e){if(!re.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(te in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const u=await readRawBody(e,!1);u&&t.enqueue(u),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}}))}(e),c="half"):a=await readRawBody(e,!1).catch((()=>{})));const D=u.fetchOptions?.method||e.method,l=function(e,...t){const u=t.filter(Boolean);if(0===u.length)return e;const a=new Headers(e);for(const e of u){const t=Array.isArray(e)?e:"function"==typeof e.entries?e.entries():Object.entries(e);for(const[e,u]of t)void 0!==u&&a.set(e,u)}return a}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),u.fetchOptions?.headers,u.headers);return async function(e,t,u={}){let a;try{a=await _getFetch(u.fetch)(t,{headers:u.headers,ignoreResponseError:!0,...u.fetchOptions})}catch(e){throw createError$1({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(a.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(a.statusText);const c=[];for(const[t,u]of a.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,u):c.push(...splitCookiesString(u)));c.length>0&&e.node.res.setHeader("set-cookie",c.map((e=>(u.cookieDomainRewrite&&(e=rewriteCookieProperty(e,u.cookieDomainRewrite,"domain")),u.cookiePathRewrite&&(e=rewriteCookieProperty(e,u.cookiePathRewrite,"path")),e))));u.onResponse&&await u.onResponse(e,a);if(void 0!==a._data)return a._data;if(e.handled)return;if(!1===u.sendStream){const t=new Uint8Array(await a.arrayBuffer());return e.node.res.end(t)}if(a.body)for await(const t of a.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...u,fetchOptions:{method:D,body:a,duplex:c,...u.fetchOptions,headers:l}})}function getProxyRequestHeaders(e,t){const u=Object.create(null),a=getRequestHeaders(e);for(const e in a)(!ae.has(e)||"host"===e&&t?.host)&&(u[e]=a[e]);return u}function fetchWithEvent(e,t,u,a){return _getFetch(a?.fetch)(t,{...u,context:u?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...u?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,u){const a="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${u}=)([^;]+)`,"gi"),((e,t,u)=>{let c;if(u in a)c=a[u];else{if(!("*"in a))return e;c=a["*"]}return c?t+c:""}))}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[u,a]of Object.entries(e))if(Array.isArray(a))for(const e of a)t.append(u,e);else a&&t.set(u,a);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=u=>async function(e,t,u){if(u.onRequest)for(const t of u.onRequest)if(await t(e),e.handled)return;const a=await t(e),c={body:a};if(u.onBeforeResponse)for(const t of u.onBeforeResponse)await t(e,c);return c.body}(u,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const ce=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,u){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",u&&"/"!==u?`\n     Route: ${u}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,u;const resolveHandler=()=>u?Promise.resolve(u):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return u={handler:toEventHandler(e.default||e)},u}))),t),a=ce((e=>u?u.handler(e):resolveHandler().then((t=>t.handler(e)))));return a.__resolve__=resolveHandler,a};function createApp(e={}){const t=[],u=function(e,t){const u=t.debug?2:void 0;return ce((async a=>{a.node.req.originalUrl=a.node.req.originalUrl||a.node.req.url||"/";const c=a._path||a.node.req.url||"/";let D;t.onRequest&&await t.onRequest(a);for(const l of e){if(l.route.length>1){if(!c.startsWith(l.route))continue;D=c.slice(l.route.length)||"/"}else D=c;if(l.match&&!l.match(D,a))continue;a._path=D,a.node.req.url=D;const e=await l.handler(a),d=void 0===e?void 0:await e;if(void 0!==d){const e={body:d};return t.onBeforeResponse&&(a._onBeforeResponseCalled=!0,await t.onBeforeResponse(a,e)),await handleHandlerResponse(a,e.body,u),void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,e)))}if(a.handled)return void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0)))}if(!a.handled)throw createError$1({statusCode:404,statusMessage:`Cannot find any path matching ${a.path||"/"}.`});t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0))}))}(t,e),a=function(e){return async t=>{let u;for(const a of e){if("/"===a.route&&!a.handler.__resolve__)continue;if(!t.startsWith(a.route))continue;if(u=t.slice(a.route.length)||"/",a.match&&!a.match(u,void 0))continue;let e={route:a.route,handler:a.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(u);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);u.__resolve__=a;const c=function(e){let t;return()=>(t||(t=e()),t)}((()=>{return t=a,{...e.websocket,async resolve(e){const u=e.request?.url||e.url||"/",{pathname:a}="string"==typeof u?parseURL(u):u,c=await t(a);return c?.handler?.__websocket__||{}}};var t})),D={use:(e,t,u)=>use(D,e,t,u),resolve:a,handler:u,stack:t,options:e,get websocket(){return c()}};return D}function use(e,t,u,a){if(Array.isArray(t))for(const c of t)use(e,c,u,a);else if(Array.isArray(u))for(const c of u)use(e,t,c,a);else"string"==typeof t?e.stack.push(normalizeLayer({...a,route:t,handler:u})):"function"==typeof t?e.stack.push(normalizeLayer({...u,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,u){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const u=sanitizeStatusCode(t,204);204===u&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(u),e.node.res.end()}(e);if(t){if(a=t,"undefined"!=typeof Response&&a instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((u=>send(e,Buffer.from(u),t.type)));if(t instanceof Error)throw createError$1(t);if("function"==typeof t.end)return!0}var a;const c=typeof t;if("string"===c)return send(e,t,oe.html);if("object"===c||"boolean"===c||"number"===c)return send(e,JSON.stringify(t,void 0,u),oe.json);if("bigint"===c)return send(e,t.toString(),oe.json);throw createError$1({statusCode:500,statusMessage:`[h3] Cannot send ${c} as response.`})}const De=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,u){const a=createEvent(t,u);try{await e.handler(a)}catch(t){const u=createError$1(t);if(isError(t)||(u.unhandled=!0),setResponseStatus(a,u.statusCode,u.statusMessage),e.options.onError&&await e.options.onError(u,a),a.handled)return;(u.unhandled||u.fatal)&&console.error("[h3]",u.fatal?"[fatal]":"[unhandled]",u),e.options.onBeforeResponse&&!a._onBeforeResponseCalled&&await e.options.onBeforeResponse(a,{body:u}),await function(e,t,u){if(e.handled)return;const a=isError(t)?t:createError$1(t),c={statusCode:a.statusCode,statusMessage:a.statusMessage,stack:[],data:a.data};if(u&&(c.stack=(a.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(a.statusCode),a.statusMessage),e.node.res.setHeader("content-type",oe.json),e.node.res.end(JSON.stringify(c,void 0,2))}(a,u,!!e.options.debug),e.options.onAfterResponse&&!a._onAfterResponseCalled&&await e.options.onAfterResponse(a,{body:u})}}}function flatHooks(e,t={},u){for(const a in e){const c=e[a],D=u?`${u}:${a}`:a;"object"==typeof c&&null!==c?flatHooks(c,t,D):"function"==typeof c&&(t[D]=c)}return t}const le={run:e=>e()},de=void 0!==console.createTask?console.createTask:()=>le;function serialTaskCaller(e,t){const u=t.shift(),a=de(u);return e.reduce(((e,u)=>e.then((()=>a.run((()=>u(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const u=t.shift(),a=de(u);return Promise.all(e.map((e=>a.run((()=>e(...t))))))}function callEachWith(e,t){for(const u of[...e])u(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,u={}){if(!e||"function"!=typeof t)return()=>{};const a=e;let c;for(;this._deprecatedHooks[e];)c=this._deprecatedHooks[e],e=c.to;if(c&&!u.allowDeprecated){let e=c.message;e||(e=`${a} hook has been deprecated`+(c.to?`, please use ${c.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let u,_function=(...e)=>("function"==typeof u&&u(),u=void 0,_function=void 0,t(...e));return u=this.hook(e,_function),u}removeHook(e,t){if(this._hooks[e]){const u=this._hooks[e].indexOf(t);-1!==u&&this._hooks[e].splice(u,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const u=this._hooks[e]||[];delete this._hooks[e];for(const t of u)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),u=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of u.splice(0,u.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...u){const a=this._before||this._after?{name:t,args:u,context:{}}:void 0;this._before&&callEachWith(this._before,a);const c=e(t in this._hooks?[...this._hooks[t]]:[],u);return c instanceof Promise?c.finally((()=>{this._after&&a&&callEachWith(this._after,a)})):(this._after&&a&&callEachWith(this._after,a),c)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function createHooks(){return new Hookable}const he=globalThis.Headers,fe=globalThis.AbortController,pe=globalThis.fetch||(()=>{throw new Error("[node-fetch-native] Failed to fetch: `globalThis.fetch` is not available!")});class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const Fe=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return Fe.has(e.toUpperCase())}const ge=new Set(["image/svg","application/xml","application/xhtml","application/html"]),me=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,u,a){const c=function(e,t,u){if(!t)return new u(e);const a=new u(t);if(e)for(const[t,c]of Symbol.iterator in e||Array.isArray(e)?e:new u(e))a.set(t,c);return a}(t?.headers??e?.headers,u?.headers,a);let D;return(u?.query||u?.params||t?.params||t?.query)&&(D={...u?.params,...u?.query,...t?.params,...t?.query}),{...u,...t,query:D,params:D,headers:c}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const u of t)await u(e);else await t(e)}const ye=new Set([408,409,425,429,500,502,503,504]),Ee=new Set([101,204,205,304]);function createFetch(e={}){const{fetch:t=globalThis.fetch,Headers:u=globalThis.Headers,AbortController:a=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const u=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(u):ye.has(u))){const u="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return u>0&&await new Promise((e=>setTimeout(e,u))),$fetchRaw(e.request,{...e.options,retry:t-1})}}const u=function(e){const t=e.error?.message||e.error?.toString()||"",u=e.request?.method||e.options?.method||"GET",a=e.request?.url||String(e.request)||"/",c=`[${u}] ${JSON.stringify(a)}`,D=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",l=new FetchError(`${c}: ${D}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(l,t,{get:()=>e[t]});for(const[t,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(l,t,{get:()=>e.response&&e.response[u]});return l}(e);throw Error.captureStackTrace&&Error.captureStackTrace(u,$fetchRaw),u}const $fetchRaw=async function(c,D={}){const l={request:c,options:resolveFetchOptions(c,D,e.defaults,u),response:void 0,error:void 0};let d;if(l.options.method&&(l.options.method=l.options.method.toUpperCase()),l.options.onRequest&&await callHooks(l,l.options.onRequest),"string"==typeof l.request&&(l.options.baseURL&&(l.request=withBase(l.request,l.options.baseURL)),l.options.query&&(l.request=withQuery(l.request,l.options.query),delete l.options.query),"query"in l.options&&delete l.options.query,"params"in l.options&&delete l.options.params),l.options.body&&isPayloadMethod(l.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(l.options.body)?("pipeTo"in l.options.body&&"function"==typeof l.options.body.pipeTo||"function"==typeof l.options.body.pipe)&&("duplex"in l.options||(l.options.duplex="half")):(l.options.body="string"==typeof l.options.body?l.options.body:JSON.stringify(l.options.body),l.options.headers=new u(l.options.headers||{}),l.options.headers.has("content-type")||l.options.headers.set("content-type","application/json"),l.options.headers.has("accept")||l.options.headers.set("accept","application/json"))),!l.options.signal&&l.options.timeout){const e=new a;d=setTimeout((()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)}),l.options.timeout),l.options.signal=e.signal}try{l.response=await t(l.request,l.options)}catch(e){return l.error=e,l.options.onRequestError&&await callHooks(l,l.options.onRequestError),await onError(l)}finally{d&&clearTimeout(d)}if((l.response.body||l.response._bodyInit)&&!Ee.has(l.response.status)&&"HEAD"!==l.options.method){const e=(l.options.parseResponse?"json":l.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return me.test(t)?"json":ge.has(t)||t.startsWith("text/")?"text":"blob"}(l.response.headers.get("content-type")||"");switch(e){case"json":{const e=await l.response.text(),t=l.options.parseResponse||destr;l.response._data=t(e);break}case"stream":l.response._data=l.response.body||l.response._bodyInit;break;default:l.response._data=await l.response[e]()}}return l.options.onResponse&&await callHooks(l,l.options.onResponse),!l.options.ignoreResponseError&&l.response.status>=400&&l.response.status<600?(l.options.onResponseError&&await callHooks(l,l.options.onResponseError),await onError(l)):l.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},u={})=>createFetch({...e,...u,defaults:{...e.defaults,...u.defaults,...t}}),$fetch}const Ce=globalThis.fetch?(...e)=>globalThis.fetch(...e):function(){if(!JSON.parse(e.env.FETCH_KEEP_ALIVE||"false"))return pe;const a={keepAlive:!0},c=new t.Agent(a),D=new u.Agent(a),l={agent:e=>"http:"===e.protocol?c:D};return function(e,t){return pe(e,{...l,...t})}}(),be=globalThis.Headers||he,we=globalThis.AbortController||fe;function asyncCall(e,...t){try{return(u=e(...t))&&"function"==typeof u.then?u:Promise.resolve(u)}catch(e){return Promise.reject(e)}var u}function stringify(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}createFetch({fetch:Ce,Headers:be,AbortController:we});const _e="base64:";function serializeRaw(e){return"string"==typeof e?e:_e+function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function deserializeRaw(e){return"string"!=typeof e?e:e.startsWith(_e)?function(e){if(globalThis.Buffer)return Buffer.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}const ve=["has","hasItem","get","getItem","getItemRaw","set","setItem","setItemRaw","del","remove","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$1(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys(...e){return normalizeKey$1(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$1(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,u){e.set(t,u)},setItemRaw(t,u){e.set(t,u)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,u){return e.watch?e.watch(((e,a)=>t(e,u+a))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const Ae={},normalizeKey=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},Be={getKeys:()=>Promise.resolve(Object.keys(Ae)),hasItem:e=>(e=normalizeKey(e),Promise.resolve(e in Ae)),getItem:e=>(e=normalizeKey(e),Promise.resolve(Ae[e]?Ae[e].import():null)),getMeta:e=>(e=normalizeKey(e),Promise.resolve(Ae[e]?Ae[e].meta:{}))};function createError(e,t,u){const a=new Error(`[unstorage] [${e}] ${t}`,u);return Error.captureStackTrace&&Error.captureStackTrace(a,createError),a}function ignoreNotfound(e){return"ENOENT"===e.code||"EISDIR"===e.code?null:e}function ignoreExists(e){return"EEXIST"===e.code?null:e}async function writeFile(e,t,u){return await ensuredir(h(e)),E.writeFile(e,t,u)}function readFile(e,t){return E.readFile(e,t).catch(ignoreNotfound)}function readdir(e){return E.readdir(e,{withFileTypes:!0}).catch(ignoreNotfound).then((e=>e||[]))}async function ensuredir(e){C(e)||(await ensuredir(h(e)).catch(ignoreExists),await E.mkdir(e).catch(ignoreExists))}async function readdirRecursive(e,t,u){if(t&&t(e))return[];const a=await readdir(e),c=[];return await Promise.all(a.map((async a=>{const D=d(e,a.name);if(a.isDirectory()){if(void 0===u||u>0){const e=await readdirRecursive(D,t,void 0===u?void 0:u-1);c.push(...e.map((e=>a.name+"/"+e)))}}else t&&t(a.name)||c.push(a.name)}))),c}async function rmRecursive(e){const t=await readdir(e);await Promise.all(t.map((t=>{const u=d(e,t.name);return t.isDirectory()?rmRecursive(u).then((()=>E.rmdir(u))):E.unlink(u)})))}const Re=/\.\.:|\.\.$/,Se="fs-lite",unstorage_47drivers_47fs_45lite=(e={})=>{if(!e.base)throw t=Se,u="base",Array.isArray(u)?createError(t,`Missing some of the required options ${u.map((e=>"`"+e+"`")).join(", ")}`):createError(t,`Missing required option \`${u}\`.`);var t,u;e.base=d(e.base);const r=t=>{if(Re.test(t))throw createError(Se,`Invalid key: ${JSON.stringify(t)}. It should not contain .. segments`);return f(e.base,t.replace(/:/g,"/"))};return{name:Se,options:e,flags:{maxDepth:!0},hasItem:e=>C(r(e)),getItem:e=>readFile(r(e),"utf8"),getItemRaw:e=>readFile(r(e)),async getMeta(e){const{atime:t,mtime:u,size:a,birthtime:c,ctime:D}=await E.stat(r(e)).catch((()=>({})));return{atime:t,mtime:u,size:a,birthtime:c,ctime:D}},setItem(t,u){if(!e.readOnly)return writeFile(r(t),u,"utf8")},setItemRaw(t,u){if(!e.readOnly)return writeFile(r(t),u)},removeItem(t){var u;if(!e.readOnly)return u=r(t),E.unlink(u).catch(ignoreNotfound)},getKeys:(t,u)=>readdirRecursive(r("."),e.ignore,u?.maxDepth),async clear(){e.readOnly||e.noClear||await rmRecursive(r("."))}}},Te=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const u of t.mountpoints)if(e.startsWith(u))return{base:u,relativeKey:e.slice(u.length),driver:t.mounts[u]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,u)=>t.mountpoints.filter((t=>t.startsWith(e)||u&&e.startsWith(t))).map((u=>({relativeBase:e.length>u.length?e.slice(u.length):void 0,mountpoint:u,driver:t.mounts[u]}))),onChange=(e,u)=>{if(t.watching){u=normalizeKey$1(u);for(const a of t.watchListeners)a(e,u)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,u)=>{const a=new Map,getBatch=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const u of e){const e="string"==typeof u,a=normalizeKey$1(e?u:u.key),c=e?void 0:u.value,D=e||!u.options?t:{...t,...u.options},l=getMount(a);getBatch(l).items.push({key:a,value:c,relativeKey:l.relativeKey,options:D})}return Promise.all([...a.values()].map((e=>u(e)))).then((e=>e.flat()))},u={hasItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:u,driver:a}=getMount(e);return asyncCall(a.hasItem,u,t)},getItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:u,driver:a}=getMount(e);return asyncCall(a.getItem,u,t).then((e=>destr(e)))},getItems:(e,t={})=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$1(e);const{relativeKey:u,driver:a}=getMount(e);return a.getItemRaw?asyncCall(a.getItemRaw,u,t):asyncCall(a.getItem,u,t).then((e=>deserializeRaw(e)))},async setItem(e,t,a={}){if(void 0===t)return u.removeItem(e);e=normalizeKey$1(e);const{relativeKey:c,driver:D}=getMount(e);D.setItem&&(await asyncCall(D.setItem,c,stringify(t),a),D.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify(t.value),t.options))))}))},async setItemRaw(e,t,a={}){if(void 0===t)return u.removeItem(e,a);e=normalizeKey$1(e);const{relativeKey:c,driver:D}=getMount(e);if(D.setItemRaw)await asyncCall(D.setItemRaw,c,t,a);else{if(!D.setItem)return;await asyncCall(D.setItem,c,serializeRaw(t),a)}D.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$1(e);const{relativeKey:u,driver:a}=getMount(e);a.removeItem&&(await asyncCall(a.removeItem,u,t),(t.removeMeta||t.removeMata)&&await asyncCall(a.removeItem,u+"$",t),a.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$1(e);const{relativeKey:u,driver:a}=getMount(e),c=Object.create(null);if(a.getMeta&&Object.assign(c,await asyncCall(a.getMeta,u,t)),!t.nativeOnly){const e=await asyncCall(a.getItem,u+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(c,e))}return c},setMeta(e,t,u={}){return this.setItem(e+"$",t,u)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const u=getMounts(e,!0);let a=[];const c=[];let D=!0;for(const e of u){e.driver.flags?.maxDepth||(D=!1);const u=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of u){const u=e.mountpoint+normalizeKey$1(t);a.some((e=>u.startsWith(e)))||c.push(u)}a=[e.mountpoint,...a.filter((t=>!t.startsWith(e.mountpoint)))]}const l=void 0!==t.maxDepth&&!D;return c.filter((u=>(!l||function(e,t){if(void 0===t)return!0;let u=0,a=e.indexOf(":");for(;a>-1;)u++,a=e.indexOf(":",a+1);return u<=t}(u,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(u,e)))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const u=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(u.map((u=>e.driver.removeItem(u,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,a){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=a,t.watching&&Promise.resolve(watch(a,onChange,e)).then((u=>{t.unwatch[e]=u})).catch(console.error),u},async unmount(e,u=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),u&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$1(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$1(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>u.getKeys(e,t),get:(e,t={})=>u.getItem(e,t),set:(e,t,a={})=>u.setItem(e,t,a),has:(e,t={})=>u.hasItem(e,t),del:(e,t={})=>u.removeItem(e,t),remove:(e,t={})=>u.removeItem(e,t)};return u}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const u={...e};for(const a of ve)u[a]=(u="",...c)=>e[a](t+u,...c);return u.getKeys=(u="",...a)=>e.getKeys(t+u,...a).then((e=>e.map((e=>e.slice(t.length))))),u.getItems=async(u,a)=>{const c=u.map((e=>"string"==typeof e?t+e:{...e,key:t+e.key}));return(await e.getItems(c,a)).map((e=>({key:e.key.slice(t.length),value:e.value})))},u.setItems=async(u,a)=>{const c=u.map((e=>({key:t+e.key,value:e.value,options:e.options})));return e.setItems(c,a)},u}(Te,e):Te}function serialize$1(e){return"string"==typeof e?`'${e}'`:(new ke).serialize(e)}Te.mount("/assets",Be),Te.mount("data",unstorage_47drivers_47fs_45lite({driver:"fsLite",base:"./.data/kv"}));const ke=function(){class o{#e=new Map;compare(e,t){const u=typeof e,a=typeof t;return"string"===u&&"string"===a?e.localeCompare(t):"number"===u&&"number"===a?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(null===e)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if("[object Object]"!==t)return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const u=e.constructor,a=u===Object||void 0===u?"":u.name;if(""!==a&&globalThis[a]===u)return this.serializeBuiltInType(a,e);if("function"==typeof e.toJSON){const t=e.toJSON();return a+(null!==t&&"object"==typeof t?this.$object(t):`(${this.serialize(t)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,t){const u=this["$"+e];if(u)return u.call(this,t);if("function"==typeof t?.entries)return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const u=Array.from(t).sort(((e,t)=>this.compare(e[0],t[0])));let a=`${e}{`;for(let e=0;e<u.length;e++){const[t,c]=u[e];a+=`${this.serialize(t,!0)}:${this.serialize(c)}`,e<u.length-1&&(a+=",")}return a+"}"}$object(e){let t=this.#e.get(e);return void 0===t&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return"[native code] }"===t.slice(-15)?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let u=0;u<e.length;u++)t+=this.serialize(e[u]),u<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort(((e,t)=>this.compare(e,t))))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const e of["Error","RegExp","URL"])o.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return o}();function isEqual(e,t){return e===t||serialize$1(e)===serialize$1(t)}const $e=globalThis.process?.getBuiltinModule?.("crypto")?.hash,xe="sha256",Oe="base64url";function digest(e){if($e)return $e(xe,e,Oe);const t=D(xe).update(e);return globalThis.process?.versions?.webcontainer?t.digest().toString(Oe):t.digest(Oe)}function hash$1(e){return digest(serialize$1(e))}const Ie=(()=>{class Hasher2{buff="";#t=new Map;write(e){this.buff+=e}dispatch(e){return this[null===e?"null":typeof e](e)}object(e){if(e&&"function"==typeof e.toJSON)return this.object(e.toJSON());const t=Object.prototype.toString.call(e);let u="";const a=t.length;u=a<10?"unknown:["+t+"]":t.slice(8,a-1),u=u.toLowerCase();let c=null;if(void 0!==(c=this.#t.get(e)))return this.dispatch("[CIRCULAR:"+c+"]");if(this.#t.set(e,this.#t.size),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e))return this.write("buffer:"),this.write(e.toString("utf8"));if("object"!==u&&"function"!==u&&"asyncfunction"!==u)this[u]?this[u](e):this.unknown(e,u);else{const t=Object.keys(e).sort(),u=[];this.write("object:"+(t.length+u.length)+":");const dispatchForKey=t=>{this.dispatch(t),this.write(":"),this.dispatch(e[t]),this.write(",")};for(const e of t)dispatchForKey(e);for(const e of u)dispatchForKey(e)}}array(e,t){if(t=void 0!==t&&t,this.write("array:"+e.length+":"),!t||e.length<=1){for(const t of e)this.dispatch(t);return}const u=new Map,a=e.map((e=>{const t=new Hasher2;t.dispatch(e);for(const[e,a]of t.#t)u.set(e,a);return t.toString()}));return this.#t=u,a.sort(),this.array(a,!1)}date(e){return this.write("date:"+e.toJSON())}symbol(e){return this.write("symbol:"+e.toString())}unknown(e,t){if(this.write(t),e)return this.write(":"),e&&"function"==typeof e.entries?this.array([...e.entries()],!0):void 0}error(e){return this.write("error:"+e.toString())}boolean(e){return this.write("bool:"+e)}string(e){this.write("string:"+e.length+":"),this.write(e)}function(e){this.write("fn:"),!function(e){if("function"!=typeof e)return!1;return"[native code] }"===Function.prototype.toString.call(e).slice(-15)}(e)?this.dispatch(e.toString()):this.dispatch("[native]")}number(e){return this.write("number:"+e)}null(){return this.write("Null")}undefined(){return this.write("Undefined")}regexp(e){return this.write("regex:"+e.toString())}arraybuffer(e){return this.write("arraybuffer:"),this.dispatch(new Uint8Array(e))}url(e){return this.write("url:"+e.toString())}map(e){this.write("map:");const t=[...e];return this.array(t,!1)}set(e){this.write("set:");const t=[...e];return this.array(t,!1)}bigint(e){return this.write("bigint:"+e.toString())}}for(const e of["uint8array","uint8clampedarray","unt8array","uint16array","unt16array","uint32array","unt32array","float32array","float64array"])Hasher2.prototype[e]=function(t){return this.write(e+":"),this.array([...t],!1)};return Hasher2})();function hash(e){return digest("string"==typeof e?e:function(e){const t=new Ie;return t.dispatch(e),t.buff}(e)).replace(/[-_]/g,"").slice(0,10)}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const u={},a=t.group||"nitro/functions",c=t.name||e.name||"_",D=t.integrity||hash([e,t]),l=t.validate||(e=>void 0!==e.value);return async(...d)=>{if(await(t.shouldBypassCache?.(...d)))return e(...d);const h=await(t.getKey||getKey)(...d),f=await(t.shouldInvalidateCache?.(...d)),F=await async function(e,d,h,f){const F=[t.base,a,c,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let g=await useStorage().getItem(F).catch((e=>{console.error("[cache] Cache read error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}))||{};if("object"!=typeof g){g={};const e=new Error("Malformed data read from cache.");console.error("[cache]",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}const m=1e3*(t.maxAge??0);m&&(g.expires=Date.now()+m);const y=h||g.integrity!==D||m&&Date.now()-(g.mtime||0)>m||!1===l(g),E=y?(async()=>{const a=u[e];a||(void 0!==g.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(g.value=void 0,g.integrity=void 0,g.mtime=void 0,g.expires=void 0),u[e]=Promise.resolve(d()));try{g.value=await u[e]}catch(t){throw a||delete u[e],t}if(!a&&(g.mtime=Date.now(),g.integrity=D,delete u[e],!1!==l(g))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const u=useStorage().setItem(F,g,e).catch((e=>{console.error("[cache] Cache write error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}));f?.waitUntil&&f.waitUntil(u)}})():Promise.resolve();return void 0===g.value?await E:y&&f&&f.waitUntil&&f.waitUntil(E),t.swr&&!1!==l(g)?(E.catch((e=>{console.error("[cache] SWR handler error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})})),g):E.then((()=>g))}(h,(()=>e(...d)),f,d[0]&&isEvent(d[0])?d[0]:void 0);let g=F.value;return t.transform&&(g=await t.transform(F,...d)||g),g}}function getKey(...e){return e.length>0?hash(e):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function defineCachedEventHandler(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const u=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),a={...t,getKey:async e=>{const a=await(t.getKey?.(e));if(a)return escapeKey(a);const c=e.node.req.originalUrl||e.node.req.url||e.path;let D;try{D=escapeKey(decodeURI(parseURL(c).pathname)).slice(0,16)||"index"}catch{D="-"}return[`${D}.${hash(c)}`,...u.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${hash(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},c=function(e,t={}){return defineCachedFunction(e,t)}((async c=>{const D={};for(const e of u){const t=c.node.req.headers[e];void 0!==t&&(D[e]=t)}const l=cloneWithProxy(c.node.req,{headers:D}),d={};let h;const f=createEvent(l,cloneWithProxy(c.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>d[e],setHeader(e,t){return d[e]=t,this},getHeaderNames:()=>Object.keys(d),hasHeader:e=>e in d,removeHeader(e){delete d[e]},getHeaders:()=>d,end(e,t,u){return"string"==typeof e&&(h=e),"function"==typeof t&&t(),"function"==typeof u&&u(),this},write:(e,t,u)=>("string"==typeof e&&(h=e),"function"==typeof t&&t(void 0),"function"==typeof u&&u(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const u=t[e];void 0!==u&&this.setHeader(e,u)}}return this}}));f.fetch=(e,t)=>fetchWithEvent(f,e,t,{fetch:useNitroApp().localFetch}),f.$fetch=(e,t)=>fetchWithEvent(f,e,t,{fetch:globalThis.$fetch}),f.waitUntil=c.waitUntil,f.context=c.context,f.context.cache={options:a};const F=await e(f)||h,g=f.node.res.getHeaders();g.etag=String(g.Etag||g.etag||`W/"${hash(F)}"`),g["last-modified"]=String(g["Last-Modified"]||g["last-modified"]||(new Date).toUTCString());const m=[];t.swr?(t.maxAge&&m.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?m.push(`stale-while-revalidate=${t.staleMaxAge}`):m.push("stale-while-revalidate")):t.maxAge&&m.push(`max-age=${t.maxAge}`),m.length>0&&(g["cache-control"]=m.join(", "));return{code:f.node.res.statusCode,headers:g,body:F}}),a);return defineEventHandler((async u=>{if(t.headersOnly){if(handleCacheHeaders(u,{maxAge:t.maxAge}))return;return e(u)}const a=await c(u);if(u.node.res.headersSent||u.node.res.writableEnded)return a.body;if(!handleCacheHeaders(u,{modifiedTime:new Date(a.headers["last-modified"]),etag:a.headers.etag,maxAge:t.maxAge})){u.node.res.statusCode=a.code;for(const e in a.headers){const t=a.headers[e];"set-cookie"===e?u.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&u.node.res.setHeader(e,t)}return a.body}}))}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,u,a)=>u in t?t[u]:Reflect.get(e,u,a),set:(e,u,a,c)=>u in t?(t[u]=a,!0):Reflect.set(e,u,a,c)})}const je=defineCachedEventHandler;function klona(e){if("object"!=typeof e)return e;var t,u,a=Object.prototype.toString.call(e);if("[object Object]"===a){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in u=new e.constructor,e)e.hasOwnProperty(t)&&u[t]!==e[t]&&(u[t]=klona(e[t]));else for(t in u={},e)"__proto__"===t?Object.defineProperty(u,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):u[t]=klona(e[t]);return u}if("[object Array]"===a){for(t=e.length,u=Array(t);t--;)u[t]=klona(e[t]);return u}return"[object Set]"===a?(u=new Set,e.forEach((function(e){u.add(klona(e))})),u):"[object Map]"===a?(u=new Map,e.forEach((function(e,t){u.set(klona(t),klona(e))})),u):"[object Date]"===a?new Date(+e):"[object RegExp]"===a?((u=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,u):"[object DataView]"===a?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===a?e.slice(0):"Array]"===a.slice(-6)?new e.constructor(e):e}const Le=K({nuxt:{},icon:{provider:"server",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500},ui:{primary:"green",gray:"cool",colors:["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","primary"],strategy:"merge"}}),He=/\d/,Pe=["-","_","/","."];function isUppercase(e=""){if(!He.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=Pe,u=[];if(!e||"string"!=typeof e)return u;let a,c,D="";for(const l of e){const e=t.includes(l);if(!0===e){u.push(D),D="",a=void 0;continue}const d=isUppercase(l);if(!1===c){if(!1===a&&!0===d){u.push(D),D=l,a=d;continue}if(!0===a&&!1===d&&D.length>1){const e=D.at(-1);u.push(D.slice(0,Math.max(0,D.length-1))),D=e+l,a=d;continue}}D+=l,a=d,c=e}return u.push(D),u}(e)).map((e=>e.toLowerCase())).join(t):""}function getEnv(t,u){const a=(c=t,kebabCase(c||"","_")).toUpperCase();var c;return destr(e.env[u.prefix+a]??e.env[u.altPrefix+a])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(t,u,a=""){for(const c in t){const D=a?`${a}_${c}`:c,l=getEnv(D,u);_isObject(t[c])?_isObject(l)?(t[c]={...t[c],...l},applyEnv(t[c],u,D)):void 0===l?applyEnv(t[c],u,D):t[c]=l??t[c]:t[c]=l??t[c],u.envExpansion&&"string"==typeof t[c]&&(t[c]=t[c].replace(Me,((t,u)=>e.env[u]||t)))}return t}const Me=/\{\{([^{}]*)\}\}/g;const Ne={app:{baseURL:"/",buildId:"df46aad9-7e41-4bab-9cd6-fa5cf2bc9436",buildAssetsDir:"/_nuxt/",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1,isr:!1},"/_nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/_nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/_nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{apiUrl:"https://restcountries.com/v3.1"},icon:{serverKnownCssClasses:[]}},Ue={prefix:"NITRO_",altPrefix:Ne.nitro.envPrefix??e.env.NITRO_ENV_PREFIX??"_",envExpansion:Ne.nitro.envExpansion??e.env.NITRO_ENV_EXPANSION??!1},qe=_deepFreeze(applyEnv(klona(Ne),Ue));function useRuntimeConfig(e){if(!e)return qe;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(Ne);return applyEnv(t,Ue),e.context.nitro.runtimeConfig=t,t}const ze=_deepFreeze(klona(Le));function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const u of t){const t=e[u];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const u=useRuntimeConfig();if(t in u)return u[t]}});const We="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{},Ke="__unctx__",Je=We[Ke]||(We[Ke]=function(e={}){const t={};return{get:(u,a={})=>(t[u]||(t[u]=function(e={}){let t,u=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let a;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?a=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(a){const e=a.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,a)=>{a||checkConflict(e),t=e,u=!0},unset:()=>{t=void 0,u=!1},call:(e,c)=>{checkConflict(e),t=e;try{return a?a.run(e,c):c()}finally{u||(t=void 0)}},async callAsync(e,c){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;Qe.add(onLeave);try{const D=a?a.run(e,c):c();return u||(t=void 0),await D}finally{Qe.delete(onLeave)}}}}({...e,...a})),t[u])}}()),getContext=(e,t={})=>Je.get(e,t),Ve="__unctx_async_handlers__",Qe=We[Ve]||(We[Ve]=new Set);function executeAsync(e){const t=[];for(const e of Qe){const u=e();u&&t.push(u)}const restore=()=>{for(const e of t)e()};let u=e();return u&&"object"==typeof u&&"catch"in u&&(u=u.catch((e=>{throw restore(),e}))),[u,restore]}const Ge=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return ce((t=>{const u=getRouteRules(t);if(u.headers&&ue(t,u.headers),u.redirect){let e=u.redirect.to;if(e.endsWith("/**")){let a=t.path;const c=u.redirect._redirectStripBase;c&&(a=withoutBase(a,c)),e=joinURL(e.slice(0,-3),a)}else if(t.path.includes("?")){e=withQuery(e,getQuery$1(t.path))}return function(e,t,u=302){return e.node.res.statusCode=sanitizeStatusCode(u,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,oe.html)}(t,e,u.redirect.statusCode)}if(u.proxy){let a=u.proxy.to;if(a.endsWith("/**")){let e=t.path;const c=u.proxy._proxyStripBase;c&&(e=withoutBase(e,c)),a=joinURL(a.slice(0,-3),e)}else if(t.path.includes("?")){a=withQuery(a,getQuery$1(t.path))}return proxyRequest(t,a,{fetch:e.localFetch,...u.proxy})}}))}function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return W({},...Ge.matchAll(e).reverse())}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[u,a]of e)if("set-cookie"===u)for(const e of normalizeCookieHeader(a))t.append("set-cookie",e);else t.set(u,joinHeaders(a));return t}function hasReqHeader(e,t,u){const a=function(e,t){return getRequestHeaders(e)[t.toLowerCase()]}(e,t);return a&&"string"==typeof a&&a.toLowerCase().includes(u)}function defaultHandler(e,t,u){const a=e.unhandled||e.fatal,c=e.statusCode||500,D=e.statusMessage||"Server Error",l=getRequestURL(t,{xForwardedHost:!0,xForwardedProto:!0});if(404===c){const e="/";if(/^\/[^/]/.test(e)&&!l.pathname.startsWith(e)){return{status:302,statusText:"Found",headers:{location:`${e}${l.pathname.slice(1)}${l.search}`},body:"Redirecting..."}}}if(a&&!u?.silent){const u=[e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(`[request error] ${u} [${t.method}] ${l}\n`,e)}const d={"content-type":"application/json","x-content-type-options":"nosniff","x-frame-options":"DENY","referrer-policy":"no-referrer","content-security-policy":"script-src 'none'; frame-ancestors 'none';"};setResponseStatus(t,c,D),404!==c&&function(e,t){return e.node.res.getHeader(t)}(t,"cache-control")||(d["cache-control"]="no-cache");return{status:c,statusText:D,headers:d,body:{error:!0,url:l.href,statusCode:c,statusMessage:D,message:a?"Server Error":e.message,data:a?void 0:e.data}}}const Ye=[async function(e,t,{defaultHandler:u}){if(t.handled||function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t))return;const a=await u(e,t,{json:!0});if(404===(e.statusCode||500)&&302===a.status)return setResponseHeaders(t,a.headers),setResponseStatus(t,a.status,a.statusText),send(t,JSON.stringify(a.body,null,2));const c=a.body,D=new URL(c.url);c.url=withoutBase(D.pathname,useRuntimeConfig(t).app.baseURL)+D.search+D.hash,c.message||="Server Error",c.data||=e.data,c.statusMessage||=e.statusMessage,delete a.headers["content-type"],delete a.headers["content-security-policy"],setResponseHeaders(t,a.headers);const l=getRequestHeaders(t),d=t.path.startsWith("/__nuxt_error")||!!l["x-nuxt-error"]?null:await useNitroApp().localFetch(withQuery(joinURL(useRuntimeConfig(t).app.baseURL,"/__nuxt_error"),c),{headers:{...l,"x-nuxt-error":"true"},redirect:"manual"}).catch((()=>null));if(t.handled)return;if(!d){const{template:e}=await import("./error-500.mjs");return setResponseHeader(t,"Content-Type","text/html;charset=UTF-8"),send(t,e(c))}const h=await d.text();for(const[e,u]of d.headers.entries())setResponseHeader(t,e,u);return setResponseStatus(t,d.status&&200!==d.status?d.status:a.status,d.statusText||a.statusText),send(t,h)},function(e,t){const u=defaultHandler(e,t);return setResponseHeaders(t,u.headers),setResponseStatus(t,u.status,u.statusText),send(t,JSON.stringify(u.body,null,2))}];const Ze=[function(e){e.hooks.hook("render:html",(e=>{e.head.push('<script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}<\/script>')}))}],Xe=/^[A-Za-z]:\//;const basename=function(e,t){const u=function(e=""){return e?e.replace(/\\/g,"/").replace(Xe,(e=>e.toUpperCase())):e}(e).split("/");let a="";for(let e=u.length-1;e>=0;e--){const t=u[e];if(t){a=t;break}}return t&&a.endsWith(t)?a.slice(0,-t.length):a},et=Object.freeze({left:0,top:0,width:16,height:16}),tt=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),rt=Object.freeze({...et,...tt});Object.freeze({...rt,body:"",hidden:!1});const ot=Object.keys(et).concat(["provider"]);function getIcons(e,t,u){const a=Object.create(null),c=Object.create(null),D={prefix:e.prefix,icons:a},l=e.icons,d=e.aliases||Object.create(null);e.lastModified&&(D.lastModified=e.lastModified);const h=function(e,t){const u=e.icons,a=e.aliases||Object.create(null),c=Object.create(null);return(t||Object.keys(u).concat(Object.keys(a))).forEach((function resolve(e){if(u[e])return c[e]=[];if(!(e in c)){c[e]=null;const t=a[e]&&a[e].parent,u=t&&resolve(t);u&&(c[e]=[t].concat(u))}return c[e]})),c}(e,t);let f=!0;for(const e in h)h[e]&&(l[e]?(a[e]={...l[e]},f=!1):(c[e]={...d[e]},D.aliases=c));return ot.forEach((t=>{t in e&&(D[t]=e[t])})),f&&!0!==u?null:D}const nt={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},st={silent:{level:-1},fatal:{level:nt.fatal},error:{level:nt.error},warn:{level:nt.warn},log:{level:nt.log},info:{level:nt.info},success:{level:nt.success},fail:{level:nt.fail},ready:{level:nt.info},start:{level:nt.info},box:{level:nt.info},debug:{level:nt.debug},trace:{level:nt.trace},verbose:{level:nt.verbose}};function isPlainObject$1(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,u=".",a){if(!isPlainObject$1(t))return _defu(e,{},u);const c=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const a=e[t];null!=a&&(Array.isArray(a)&&Array.isArray(c[t])?c[t]=[...a,...c[t]]:isPlainObject$1(a)&&isPlainObject$1(c[t])?c[t]=_defu(a,c[t],(u?`${u}.`:"")+t.toString()):c[t]=a)}return c}const defu=(...e)=>e.reduce(((e,t)=>_defu(e,t,"")),{});function isLogObj(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)&&(!(!e.message&&!e.args)&&!e.stack);var t}let ut=!1;const it=[];class Consola{options;_lastLog;_mockFn;constructor(e={}){const t=e.types||st;this.options=defu({...e,defaults:{...e.defaults},level:_normalizeLogLevel(e.level,t),reporters:[...e.reporters||[]]},{types:st,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const e in t){const u={type:e,...this.options.defaults,...t[e]};this[e]=this._wrapLogFn(u),this[e].raw=this._wrapLogFn(u,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=_normalizeLogLevel(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new Consola({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){ut=!0}resumeLogs(){ut=!1;const e=it.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(const e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...u)=>{if(!ut)return this._logFn(e,u,t);it.push([this,e,u,t])}}_logFn(e,t,u){if((e.level||0)>this.level)return!1;const a={date:new Date,args:[],...e,level:_normalizeLogLevel(e.level,this.options.types)};!u&&1===t.length&&isLogObj(t[0])?Object.assign(a,t[0]):a.args=[...t],a.message&&(a.args.unshift(a.message),delete a.message),a.additional&&(Array.isArray(a.additional)||(a.additional=a.additional.split("\n")),a.args.push("\n"+a.additional.join("\n")),delete a.additional),a.type="string"==typeof a.type?a.type.toLowerCase():"log",a.tag="string"==typeof a.tag?a.tag:"";const resolveLog=(e=!1)=>{const t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){const e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=a,this._log(a))};clearTimeout(this._lastLog.timeout);const c=this._lastLog.time&&a.date?a.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=a.date,c<this.options.throttle)try{const e=JSON.stringify([a.type,a.tag,a.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(resolveLog,this.options.throttle))}catch{}resolveLog(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function _normalizeLogLevel(e,t={},u=3){return void 0===e?u:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:u}function parseStack(t,u){const a=e.cwd()+F,c=t.split("\n").splice(u.split("\n").length).map((e=>e.trim().replace("file://","").replace(a,"")));return c}Consola.prototype.add=Consola.prototype.addReporter,Consola.prototype.remove=Consola.prototype.removeReporter,Consola.prototype.clear=Consola.prototype.removeReporter,Consola.prototype.withScope=Consola.prototype.withTag,Consola.prototype.mock=Consola.prototype.mockTypes,Consola.prototype.pause=Consola.prototype.pauseLogs,Consola.prototype.resume=Consola.prototype.resumeLogs;const bracket=e=>e?`[${e}]`:"";class BasicReporter{formatStack(e,t,u){const a="  ".repeat((u?.errorLevel||0)+1);return a+parseStack(e,t).join(`\n${a}`)}formatError(e,t){const u=e.message??l(t,e),a=e.stack?this.formatStack(e.stack,u,t):"",c=t?.errorLevel||0;return(c>0?`${"  ".repeat(c)}[cause]: `:"")+u+"\n"+a+(e.cause?"\n\n"+this.formatError(e.cause,{...t,errorLevel:c+1}):"")}formatArgs(e,t){const u=e.map((e=>e&&"string"==typeof e.stack?this.formatError(e,t):e));return l(t,...u)}formatDate(e,t){return t.date?e.toLocaleTimeString():""}filterAndJoin(e){return e.filter(Boolean).join(" ")}formatLogObj(e,t){const u=this.formatArgs(e.args,t);return"box"===e.type?"\n"+[bracket(e.tag),e.title&&e.title,...u.split("\n")].filter(Boolean).map((e=>" > "+e)).join("\n")+"\n":this.filterAndJoin([bracket(e.type),bracket(e.tag),u])}log(t,u){const a=this.formatLogObj(t,{columns:u.options.stdout.columns||0,...u.options.formatOptions});return c=a+"\n",((D=t.level<2?u.options.stderr||e.stderr:u.options.stdout||e.stdout).__write||D.write).call(D,c);var c,D}}const{env:at={},argv:ct=[],platform:Dt=""}=void 0===e?{}:e,lt="NO_COLOR"in at||ct.includes("--no-color"),dt="FORCE_COLOR"in at||ct.includes("--color"),ht="win32"===Dt,ft="dumb"===at.TERM,pt=m&&m.isatty&&m.isatty(1)&&at.TERM&&!ft,Ft=!lt&&(dt||ht&&!ft||pt||"CI"in at&&("GITHUB_ACTIONS"in at||"GITLAB_CI"in at||"CIRCLECI"in at));function replaceClose(e,t,u,a,c=t.slice(0,Math.max(0,e))+a,D=t.slice(Math.max(0,e+u.length)),l=D.indexOf(u)){return c+(l<0?D:replaceClose(l,D,u,a))}function clearBleed(e,t,u,a,c){return e<0?u+t+a:u+replaceClose(e,t,a,c)+a}function init(e,t,u){return function(e,t,u=e,a=e.length+1){return c=>c||""!==c&&void 0!==c?clearBleed((""+c).indexOf(t,a),c,e,t,u):""}(`[${e}m`,`[${t}m`,u)}const gt={reset:init(0,0),bold:init(1,22,"[22m[1m"),dim:init(2,22,"[22m[2m"),italic:init(3,23),underline:init(4,24),inverse:init(7,27),hidden:init(8,28),strikethrough:init(9,29),black:init(30,39),red:init(31,39),green:init(32,39),yellow:init(33,39),blue:init(34,39),magenta:init(35,39),cyan:init(36,39),white:init(37,39),gray:init(90,39),bgBlack:init(40,49),bgRed:init(41,49),bgGreen:init(42,49),bgYellow:init(43,49),bgBlue:init(44,49),bgMagenta:init(45,49),bgCyan:init(46,49),bgWhite:init(47,49),blackBright:init(90,39),redBright:init(91,39),greenBright:init(92,39),yellowBright:init(93,39),blueBright:init(94,39),magentaBright:init(95,39),cyanBright:init(96,39),whiteBright:init(97,39),bgBlackBright:init(100,49),bgRedBright:init(101,49),bgGreenBright:init(102,49),bgYellowBright:init(103,49),bgBlueBright:init(104,49),bgMagentaBright:init(105,49),bgCyanBright:init(106,49),bgWhiteBright:init(107,49)};const mt=function(e=Ft){return e?gt:Object.fromEntries(Object.keys(gt).map((e=>[e,String])))}();const yt=[String.raw`[\u001B\u009B][[\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\d\/#&.:=?%@~_]+)*|[a-zA-Z\d]+(?:;[-a-zA-Z\d\/#&.:=?%@~_]*)*)?\u0007)`,String.raw`(?:(?:\d{1,4}(?:;\d{0,4})*)?[\dA-PR-TZcf-nq-uy=><~]))`].join("|");function stripAnsi$1(e){return e.replace(new RegExp(yt,"g"),"")}const Et={solid:{tl:"┌",tr:"┐",bl:"└",br:"┘",h:"─",v:"│"},double:{tl:"╔",tr:"╗",bl:"╚",br:"╝",h:"═",v:"║"},doubleSingle:{tl:"╓",tr:"╖",bl:"╙",br:"╜",h:"─",v:"║"},doubleSingleRounded:{tl:"╭",tr:"╮",bl:"╰",br:"╯",h:"─",v:"║"},singleThick:{tl:"┏",tr:"┓",bl:"┗",br:"┛",h:"━",v:"┃"},singleDouble:{tl:"╒",tr:"╕",bl:"╘",br:"╛",h:"═",v:"│"},singleDoubleRounded:{tl:"╭",tr:"╮",bl:"╰",br:"╯",h:"═",v:"│"},rounded:{tl:"╭",tr:"╮",bl:"╰",br:"╯",h:"─",v:"│"}},Ct={borderColor:"white",borderStyle:"rounded",valign:"center",padding:2,marginLeft:1,marginTop:1,marginBottom:1};function box(e,t={}){const u={...t,style:{...Ct,...t.style}},a=e.split("\n"),c=[],D=function(e,t="reset"){return mt[e]||mt[t]}(u.style.borderColor),l={..."string"==typeof u.style.borderStyle?Et[u.style.borderStyle]||Et.solid:u.style.borderStyle};if(D)for(const e in l)l[e]=D(l[e]);const d=u.style.padding%2==0?u.style.padding:u.style.padding+1,h=a.length+d,f=Math.max(...a.map((e=>stripAnsi$1(e).length)),u.title?stripAnsi$1(u.title).length:0)+d,F=f+d,g=u.style.marginLeft>0?" ".repeat(u.style.marginLeft):"";if(u.style.marginTop>0&&c.push("".repeat(u.style.marginTop)),u.title){const e=D?D(u.title):u.title,t=l.h.repeat(Math.floor((f-stripAnsi$1(u.title).length)/2)),a=l.h.repeat(f-stripAnsi$1(u.title).length-stripAnsi$1(t).length+d);c.push(`${g}${l.tl}${t}${e}${a}${l.tr}`)}else c.push(`${g}${l.tl}${l.h.repeat(F)}${l.tr}`);const m="center"===u.style.valign?Math.floor((h-a.length)/2):"top"===u.style.valign?h-a.length-d:h-a.length;for(let e=0;e<h;e++)if(e<m||e>=m+a.length)c.push(`${g}${l.v}${" ".repeat(F)}${l.v}`);else{const t=a[e-m],u=" ".repeat(d),D=" ".repeat(f-stripAnsi$1(t).length);c.push(`${g}${l.v}${u}${t}${D}${l.v}`)}return c.push(`${g}${l.bl}${l.h.repeat(F)}${l.br}`),u.style.marginBottom>0&&c.push("".repeat(u.style.marginBottom)),c.join("\n")}const bt=Object.create(null),i=e=>globalThis.process?.env||globalThis._importMeta_.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?bt:globalThis),wt=new Proxy(bt,{get:(e,t)=>i()[t]??bt[t],has:(e,t)=>t in i()||t in bt,set:(e,t,u)=>(i(!0)[t]=u,!0),deleteProperty(e,t){if(!t)return!1;return delete i(!0)[t],!0},ownKeys(){const e=i(!0);return Object.keys(e)}}),_t=typeof e<"u"&&e.env?"production":"",vt=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["CODESANDBOX","CODESANDBOX_HOST",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"],["DENO-DEPLOY","DENO_DEPLOYMENT_ID"],["FIREBASE_APP_HOSTING","FIREBASE_APP_HOSTING",{ci:!0}]];const At=function(){if(globalThis.process?.env)for(const e of vt){const t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return"/bin/jsh"===globalThis.process?.env?.SHELL&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function n(e){return!!e&&"false"!==e}At.name;const Bt=globalThis.process?.platform||"",Rt=n(wt.CI)||!1!==At.ci,St=n(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY),Tt=n(wt.DEBUG),kt="test"===_t||n(wt.TEST);n(wt.MINIMAL);const $t=/^win/i.test(Bt);!n(wt.NO_COLOR)&&(n(wt.FORCE_COLOR)||(St||$t)&&wt.TERM);const xt=(globalThis.process?.versions?.node||"").replace(/^v/,"")||null;Number(xt?.split(".")[0]);const Ot=globalThis.process||Object.create(null),It={versions:{}};new Proxy(Ot,{get:(e,t)=>"env"===t?wt:t in e?e[t]:t in It?It[t]:void 0});const jt="node"===globalThis.process?.release?.name,Lt=!!globalThis.Bun||!!globalThis.process?.versions?.bun,Ht=!!globalThis.Deno,Pt=!!globalThis.fastly,Mt=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],["Cloudflare-Workers"===globalThis.navigator?.userAgent,"workerd"],[Pt,"fastly"],[Ht,"deno"],[Lt,"bun"],[jt,"node"]];!function(){const e=Mt.find((e=>e[0]));if(e)e[1]}();const Nt=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();function eastAsianWidth(e,{ambiguousAsWide:t=!1}={}){return function(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}(e),12288===(u=e)||u>=65281&&u<=65376||u>=65504&&u<=65510||function(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9776&&e<=9783||e>=9800&&e<=9811||9855===e||e>=9866&&e<=9871||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||94192===e||94193===e||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)||t&&function(e){return 161===e||164===e||167===e||168===e||170===e||173===e||174===e||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||198===e||208===e||215===e||216===e||e>=222&&e<=225||230===e||e>=232&&e<=234||236===e||237===e||240===e||242===e||243===e||e>=247&&e<=250||252===e||254===e||257===e||273===e||275===e||283===e||294===e||295===e||299===e||e>=305&&e<=307||312===e||e>=319&&e<=322||324===e||e>=328&&e<=331||333===e||338===e||339===e||358===e||359===e||363===e||462===e||464===e||466===e||468===e||470===e||472===e||474===e||476===e||593===e||609===e||708===e||711===e||e>=713&&e<=715||717===e||720===e||e>=728&&e<=731||733===e||735===e||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||1025===e||e>=1040&&e<=1103||1105===e||8208===e||e>=8211&&e<=8214||8216===e||8217===e||8220===e||8221===e||e>=8224&&e<=8226||e>=8228&&e<=8231||8240===e||8242===e||8243===e||8245===e||8251===e||8254===e||8308===e||8319===e||e>=8321&&e<=8324||8364===e||8451===e||8453===e||8457===e||8467===e||8470===e||8481===e||8482===e||8486===e||8491===e||8531===e||8532===e||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||8585===e||e>=8592&&e<=8601||8632===e||8633===e||8658===e||8660===e||8679===e||8704===e||8706===e||8707===e||8711===e||8712===e||8715===e||8719===e||8721===e||8725===e||8730===e||e>=8733&&e<=8736||8739===e||8741===e||e>=8743&&e<=8748||8750===e||e>=8756&&e<=8759||8764===e||8765===e||8776===e||8780===e||8786===e||8800===e||8801===e||e>=8804&&e<=8807||8810===e||8811===e||8814===e||8815===e||8834===e||8835===e||8838===e||8839===e||8853===e||8857===e||8869===e||8895===e||8978===e||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||9632===e||9633===e||e>=9635&&e<=9641||9650===e||9651===e||9654===e||9655===e||9660===e||9661===e||9664===e||9665===e||e>=9670&&e<=9672||9675===e||e>=9678&&e<=9681||e>=9698&&e<=9701||9711===e||9733===e||9734===e||9737===e||9742===e||9743===e||9756===e||9758===e||9792===e||9794===e||9824===e||9825===e||e>=9827&&e<=9829||e>=9831&&e<=9834||9836===e||9837===e||9839===e||9886===e||9887===e||9919===e||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||9955===e||9960===e||9961===e||e>=9963&&e<=9969||9972===e||e>=9974&&e<=9977||9979===e||9980===e||9982===e||9983===e||10045===e||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||65533===e||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||127375===e||127376===e||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}(e)?2:1;var u}const Ut=globalThis.Intl?.Segmenter?new Intl.Segmenter:{segment:e=>e.split("")},qt=/^\p{Default_Ignorable_Code_Point}$/u;function stringWidth$1(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:u=!0,countAnsiEscapeCodes:a=!1}=t;if(a||(e=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Nt,"")}(e)),0===e.length)return 0;let c=0;const D={ambiguousAsWide:!u};for(const{segment:t}of Ut.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||qt.test(t)||(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g.test(t)?c+=2:c+=eastAsianWidth(e,D)))}return c}const zt={info:"cyan",fail:"red",success:"green",ready:"green",start:"magenta"},Wt={0:"red",1:"yellow"},Kt=function(){const{env:e}=g,{TERM:t,TERM_PROGRAM:u}=e;return"win32"!==g.platform?"linux"!==t:Boolean(e.WT_SESSION)||Boolean(e.TERMINUS_SUBLIME)||"{cmd::Cmder}"===e.ConEmuTask||"Terminus-Sublime"===u||"vscode"===u||"xterm-256color"===t||"alacritty"===t||"rxvt-unicode"===t||"rxvt-unicode-256color"===t||"JetBrains-JediTerm"===e.TERMINAL_EMULATOR}(),s=(e,t)=>Kt?e:t,Jt={error:s("✖","×"),fatal:s("✖","×"),ready:s("✔","√"),warn:s("⚠","‼"),info:s("ℹ","i"),success:s("✔","√"),debug:s("⚙","D"),trace:s("→","→"),fail:s("✖","×"),start:s("◐","o"),log:""};function stringWidth(e){return"object"==typeof Intl&&Intl.Segmenter?stringWidth$1(e):stripAnsi$1(e).length}class FancyReporter extends BasicReporter{formatStack(e,t,u){const a="  ".repeat((u?.errorLevel||0)+1);return`\n${a}`+parseStack(e,t).map((e=>"  "+e.replace(/^at +/,(e=>mt.gray(e))).replace(/\((.+)\)/,((e,t)=>`(${mt.cyan(t)})`)))).join(`\n${a}`)}formatType(e,t,u){const a=zt[e.type]||Wt[e.level]||"gray";if(t)return function(e="bgWhite"){return mt[`bg${e[0].toUpperCase()}${e.slice(1)}`]||mt.bgWhite}(a)(mt.black(` ${e.type.toUpperCase()} `));const c="string"==typeof Jt[e.type]?Jt[e.type]:e.icon||e.type;return c?function(e="white"){return mt[e]||mt.white}(a)(c):""}formatLogObj(e,t){const[u,...a]=this.formatArgs(e.args,t).split("\n");if("box"===e.type)return box(characterFormat(u+(a.length>0?"\n"+a.join("\n"):"")),{title:e.title?characterFormat(e.title):void 0,style:e.style});const c=this.formatDate(e.date,t),D=c&&mt.gray(c),l=e.badge??e.level<2,d=this.formatType(e,l,t),h=e.tag?mt.gray(e.tag):"";let f;const F=this.filterAndJoin([d,characterFormat(u)]),g=this.filterAndJoin(t.columns?[h,D]:[h]),m=(t.columns||0)-stringWidth(F)-stringWidth(g)-2;if(f=m>0&&(t.columns||0)>=80?F+" ".repeat(m)+g:(g?`${mt.gray(`[${g}]`)} `:"")+F,f+=characterFormat(a.length>0?"\n"+a.join("\n"):""),"trace"===e.type){const t=new Error("Trace: "+e.message);f+=this.formatStack(t.stack||"",t.message)}return l?"\n"+f+"\n":f}}function characterFormat(e){return e.replace(/`([^`]+)`/gm,((e,t)=>mt.cyan(t))).replace(/\s+_([^_]+)_\s+/gm,((e,t)=>` ${mt.underline(t)} `))}const Vt=function(t={}){let u=function(){if(Tt)return nt.debug;if(kt)return nt.warn;return nt.info}();e.env.CONSOLA_LEVEL&&(u=Number.parseInt(e.env.CONSOLA_LEVEL)??u);const a=function(e={}){return new Consola(e)}({level:u,defaults:{level:u},stdout:e.stdout,stderr:e.stderr,prompt:(...e)=>import("./prompt.mjs").then((t=>t.prompt(...e))),reporters:t.reporters||[t.fancy??(!Rt&&!kt)?new FancyReporter:new BasicReporter],...t});return a}();function defineRenderHandler(e){const t=useRuntimeConfig();return ce((async u=>{const a=useNitroApp(),c={event:u,render:e,response:void 0};if(await a.hooks.callHook("render:before",c),!c.response){if(u.path===`${t.app.baseURL}favicon.ico`)return setResponseHeader(u,"Content-Type","image/x-icon"),send(u,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");if(c.response=await c.render(u),!c.response){const e=getResponseStatus(u);return setResponseStatus(u,200===e?500:e),send(u,"No response returned from render handler: "+u.path)}}return await a.hooks.callHook("render:response",c.response,c),c.response.headers&&setResponseHeaders(u,c.response.headers),(c.response.statusCode||c.response.statusMessage)&&setResponseStatus(u,c.response.statusCode,c.response.statusMessage),c.response.body}))}function baseURL(){return useRuntimeConfig().app.baseURL}function buildAssetsURL(...e){return joinRelativeURL(publicAssetsURL(),useRuntimeConfig().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=useRuntimeConfig().app,u=t.cdnURL||t.baseURL;return e.length?joinRelativeURL(u,...e):u}const Qt=y(globalThis._importMeta_.url),Gt={heroicons:()=>Qt("@iconify-json/heroicons/icons.json")},Yt=defineCachedEventHandler((async e=>{const t=getRequestURL(e);if(!t)return createError$1({status:400,message:"Invalid icon request"});const u=ze.icon,a=e.context.params?.collection?.replace(/\.json$/,""),c=a?await(Gt[a]?.()):null,D=u.iconifyApiEndpoint||"https://api.iconify.design",l=t.searchParams.get("icons")?.split(",");if(c&&l?.length){const e=getIcons(c,l);return Vt.debug(`[Icon] serving ${(l||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from bundled collection`),e}if(!0===u.fallbackToApi||"server-only"===u.fallbackToApi){const e=new URL("./"+basename(t.pathname)+t.search,D);if(Vt.debug(`[Icon] fetching ${(l||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from iconify api`),e.host!==new URL(D).host)return createError$1({status:400,message:"Invalid icon request"});try{return await $fetch(e.href)}catch(e){return Vt.error(e),404===e.status?createError$1({status:404}):createError$1({status:500,message:"Failed to fetch fallback icon"})}}return createError$1({status:404})}),{group:"nuxt",name:"icon",getKey(e){const t=e.context.params?.collection?.replace(/\.json$/,"")||"unknown",u=String(getQuery(e).icons||"");return`${t}_${u.split(",")[0]}_${u.length}_${hash$1(u)}`},swr:!0,maxAge:604800}),_lazy_hXUA_D=()=>import("../routes/renderer.mjs").then((function(e){return e.j})),Zt=[{route:"/__nuxt_error",handler:_lazy_hXUA_D,lazy:!0,middleware:!1,method:void 0},{route:"/api/_nuxt_icon/:collection",handler:Yt,lazy:!1,middleware:!1,method:void 0},{route:"/__nuxt_island/**",handler:defineEventHandler((()=>{})),lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:_lazy_hXUA_D,lazy:!0,middleware:!1,method:void 0}];const Xt=function(){const e=useRuntimeConfig(),t=createHooks(),captureError=(e,u={})=>{const a=t.callHookParallel("error",e,u).catch((e=>{console.error("Error while capturing another error",e)}));if(u.event&&isEvent(u.event)){const t=u.event.context.nitro?.errors;t&&t.push({error:e,context:u}),u.event.waitUntil&&u.event.waitUntil(a)}},u=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),async function(e,t){for(const u of Ye)try{if(await u(e,t,{defaultHandler:defaultHandler}),t.handled)return}catch(e){console.error(e)}}(e,t)),onRequest:async e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t?._platform&&(e.context={_platform:t?._platform,...t._platform,...e.context}),!e.context.waitUntil&&t?.waitUntil&&(e.context.waitUntil=t.waitUntil),e.fetch=(t,u)=>fetchWithEvent(e,t,u,{fetch:localFetch}),e.$fetch=(t,u)=>fetchWithEvent(e,t,u,{fetch:D}),e.waitUntil=t=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(t),e.context.waitUntil&&e.context.waitUntil(t)},e.captureError=(t,u)=>{captureError(t,{event:e,...u})},await Xt.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await Xt.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await Xt.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),a=function(e={}){const t=createRouter$1({}),u={};let a;const c={},addRoute=(e,a,D)=>{let l=u[e];if(l||(u[e]=l={path:e,handlers:{}},t.insert(e,l)),Array.isArray(D))for(const t of D)addRoute(e,a,t);else l.handlers[D]=toEventHandler(a,0,e);return c};c.use=c.add=(e,t,u)=>addRoute(e,t,u||"all");for(const e of De)c[e]=(t,u)=>c.add(t,u,e);const matchHandler=(e="/",u="get")=>{const c=e.indexOf("?");-1!==c&&(e=e.slice(0,Math.max(0,c)));const D=t.lookup(e);if(!D||!D.handlers)return{error:createError$1({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let l=D.handlers[u]||D.handlers.all;if(!l){a||(a=toRouteMatcher(t));const c=a.matchAll(e).reverse();for(const e of c){if(e.handlers[u]){l=e.handlers[u],D.handlers[u]=D.handlers[u]||l;break}if(e.handlers.all){l=e.handlers.all,D.handlers.all=D.handlers.all||l;break}}}return l?{matched:D,handler:l}:{error:createError$1({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${u} is not allowed on this route.`})}},D=e.preemptive||e.preemtive;return c.handler=ce((e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(D)throw t.error;return}e.context.matchedRoute=t.matched;const u=t.matched.params||{};return e.context.params=u,Promise.resolve(t.handler(e)).then((e=>void 0===e&&D?null:e))})),c.handler.__resolve__=async e=>{e=withLeadingSlash(e);const t=matchHandler(e);if("error"in t)return;let u={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const a=await t.handler.__resolve__(e);if(!a)return;u={...u,...a}}return u},c}({preemptive:!0}),c=toNodeListener(u),localFetch=(e,t)=>e.toString().startsWith("/")?async function(e,t,u={}){try{const a=await b$1(e,{url:t,...u});return new Response(a.body,{status:a.status,statusText:a.statusText,headers:S$1(a.headers)})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}(c,e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))):globalThis.fetch(e,t),D=createFetch({fetch:localFetch,Headers:be,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=D,u.use(createRouteRulesHandler({localFetch:localFetch}));for(const t of Zt){let c=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const a=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");u.use(a,c)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(c=je(c,{group:"nitro/routes",...e.cache})),a.use(t.route,c,t.method)}}return u.use(e.app.baseURL,a.handler),{hooks:t,h3App:u,router:a,localCall:e=>b$1(c,e),localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return Xt}!function(e){for(const t of Ze)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(Xt);export{pe as A,baseURL as B,withBase as C,destr as D,executeAsync as E,toRouteMatcher as F,createRouter$1 as G,hash$1 as H,serialize$1 as I,isEqual as J,withTrailingSlash as K,withoutTrailingSlash as L,useRuntimeConfig as a,buildAssetsURL as b,createHooks as c,defineRenderHandler as d,publicAssetsURL as e,createError$1 as f,getQuery as g,getRouteRules as h,getResponseStatusText as i,getResponseStatus as j,K as k,klona as l,W as m,createDefu$1 as n,hasProtocol as o,parseQuery as p,isScriptProtocol as q,joinURL as r,withQuery as s,toNodeListener as t,useNitroApp as u,sanitizeStatusCode as v,withLeadingSlash as w,getContext as x,fe as y,he as z};
//# sourceMappingURL=nitro.mjs.map
