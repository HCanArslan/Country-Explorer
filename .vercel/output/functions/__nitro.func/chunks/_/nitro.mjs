import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import t from"node:http";import s from"node:https";import{EventEmitter as a}from"node:events";import{Buffer as u}from"node:buffer";import{createHash as c}from"node:crypto";import{formatWithOptions as l}from"node:util";import{resolve as D,dirname as d,join as h,sep as f}from"node:path";import g from"node:process";import*as m from"node:tty";import{fileURLToPath as F}from"node:url";import*as y from"crypto";import*as E from"fs";import{promises as C,existsSync as w}from"node:fs";const b=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,v=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const s=e.trim();if(s.length<=9)switch(s.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!_.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(b.test(e)||v.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const A=/#/g,B=/&/g,R=/\//g,S=/=/g,I=/\+/g,x=/%5e/gi,T=/%60/gi,$=/%7c/gi,O=/%20/gi;function encodeQueryValue(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace($,"|")).replace(I,"%2B").replace(O,"+").replace(A,"%23").replace(B,"%26").replace(T,"`").replace(x,"^").replace(R,"%2F");var t}function encodeQueryKey(e){return encodeQueryValue(e).replace(S,"%3D")}function decode(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryValue(e){return decode(e.replace(I," "))}function parseQuery(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const s of e.split("&")){const e=s.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const a=decode(e[1].replace(I," "));if("__proto__"===a||"constructor"===a)continue;const u=decodeQueryValue(e[2]||"");void 0===t[a]?t[a]=u:Array.isArray(t[a])?t[a].push(u):t[a]=[t[a],u]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return s=t,"number"!=typeof(a=e[t])&&"boolean"!=typeof a||(a=String(a)),a?Array.isArray(a)?a.map((e=>`${encodeQueryKey(s)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(s)}=${encodeQueryValue(a)}`:encodeQueryKey(s);var s,a})).filter(Boolean).join("&")}const k=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,j=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,P=/^([/\\]\s*){2,}[^/\\]/,L=/^[\s\0]*(blob|data|javascript|vbscript):$/i,H=/\/$|\/\?|\/#/,N=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?k.test(e):j.test(e)||!!t.acceptRelative&&P.test(e)}function isScriptProtocol(e){return!!e&&L.test(e)}function hasTrailingSlash(e="",t){return t?H.test(e):e.endsWith("/")}function withoutTrailingSlash(e="",t){if(!t)return(hasTrailingSlash(e)?e.slice(0,-1):e)||"/";if(!hasTrailingSlash(e,!0))return e||"/";let s=e,a="";const u=e.indexOf("#");-1!==u&&(s=e.slice(0,u),a=e.slice(u));const[c,...l]=s.split("?");return((c.endsWith("/")?c.slice(0,-1):c)||"/")+(l.length>0?`?${l.join("?")}`:"")+a}function withTrailingSlash(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(hasTrailingSlash(e,!0))return e||"/";let s=e,a="";const u=e.indexOf("#");if(-1!==u&&(s=e.slice(0,u),a=e.slice(u),!s))return a;const[c,...l]=s.split("?");return c+"/"+(l.length>0?`?${l.join("?")}`:"")+a}function withLeadingSlash(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}function withBase(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const s=withoutTrailingSlash(t);return e.startsWith(s)?e:joinURL(s,e)}function withoutBase(e,t){if(isEmptyURL(t))return e;const s=withoutTrailingSlash(t);if(!e.startsWith(s))return e;const a=e.slice(s.length);return"/"===a[0]?a:"/"+a}function withQuery(e,t){const s=parseURL(e),a={...parseQuery(s.search),...t};return s.search=stringifyQuery(a),function(e){const t=e.pathname||"",s=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",a=e.hash||"",u=e.auth?e.auth+"@":"",c=e.host||"",l=e.protocol||e[M]?(e.protocol||"")+"//":"";return l+u+c+t+s+a}(s)}function getQuery$1(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let s=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(s){const t=e.replace(N,"");s=withTrailingSlash(s)+t}else s=e;return s}function joinRelativeURL(...e){const t=/\/(?!\/)/,s=e.filter(Boolean),a=[];let u=0;for(const e of s)if(e&&"/"!==e)for(const[s,c]of e.split(t).entries())if(c&&"."!==c)if(".."!==c)1===s&&a[a.length-1]?.endsWith(":/")?a[a.length-1]+="/"+c:(a.push(c),u++);else{if(1===a.length&&hasProtocol(a[0]))continue;a.pop(),u--}let c=a.join("/");return u>=0?s[0]?.startsWith("/")&&!c.startsWith("/")?c="/"+c:s[0]?.startsWith("./")&&!c.startsWith("./")&&(c="./"+c):c="../".repeat(-1*u)+c,s[s.length-1]?.endsWith("/")&&!c.endsWith("/")&&(c+="/"),c}const M=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const s=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,e,t=""]=s;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return parsePath(e);const[,a="",u,c=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,l="",D=""]=c.match(/([^#/?]*)(.*)?/)||[];"file:"===a&&(D=D.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:d,search:h,hash:f}=parsePath(D);return{protocol:a.toLowerCase(),auth:u?u.slice(0,Math.max(0,u.length-1)):"",host:l,pathname:d,search:h,hash:f,[M]:!a}}function parsePath(e=""){const[t="",s="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:s,hash:a}}const U=0,z=1,q=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const s in e.routes)insert(t,normalizeTrailingSlash(s),e.routes[s]);return{ctx:t,lookup:e=>function(e,t){const s=e.staticRoutesMap[t];if(s)return s.data;const a=t.split("/"),u={};let c=!1,l=null,D=e.rootNode,d=null;for(let e=0;e<a.length;e++){const t=a[e];null!==D.wildcardChildNode&&(l=D.wildcardChildNode,d=a.slice(e).join("/"));const s=D.children.get(t);if(void 0===s){if(D&&D.placeholderChildren.length>1){const t=a.length-e;D=D.placeholderChildren.find((e=>e.maxDepth===t))||null}else D=D.placeholderChildren[0]||null;if(!D)break;D.paramName&&(u[D.paramName]=t),c=!0}else D=s}null!==D&&null!==D.data||null===l||(D=l,u[D.paramName||"_"]=d,c=!0);if(!D)return null;if(c)return{...D.data,params:c?u:void 0};return D.data}(t,normalizeTrailingSlash(e)),insert:(e,s)=>insert(t,normalizeTrailingSlash(e),s),remove:e=>function(e,t){let s=!1;const a=t.split("/");let u=e.rootNode;for(const e of a)if(u=u.children.get(e),!u)return s;if(u.data){const e=a.at(-1)||"";u.data=null,0===Object.keys(u.children).length&&u.parent&&(u.parent.children.delete(e),u.parent.wildcardChildNode=null,u.parent.placeholderChildren=[]),s=!0}return s}(t,normalizeTrailingSlash(e))}}function insert(e,t,s){let a=!0;const u=t.split("/");let c=e.rootNode,l=0;const D=[c];for(const e of u){let t;if(t=c.children.get(e))c=t;else{const s=getNodeType(e);t=createRadixNode({type:s,parent:c}),c.children.set(e,t),s===q?(t.paramName="*"===e?"_"+l++:e.slice(1),c.placeholderChildren.push(t),a=!1):s===z&&(c.wildcardChildNode=t,t.paramName=e.slice(3)||"_",a=!1),D.push(t),c=t}}for(const[e,t]of D.entries())t.maxDepth=Math.max(D.length-e,t.maxDepth||0);return c.data=s,!0===a&&(e.staticRoutesMap[t]=c),c}function createRadixNode(e={}){return{type:e.type||U,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?z:":"===e[0]||"*"===e?q:U}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:s=>_matchRoutes(s,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,s){!0!==s&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const a=[];for(const[s,u]of _sortRoutesMap(t.wildcard))(e===s||e.startsWith(s+"/"))&&a.push(u);for(const[s,u]of _sortRoutesMap(t.dynamic))if(e.startsWith(s+"/")){const t="/"+e.slice(s.length).split("/").splice(2).join("/");a.push(..._matchRoutes(t,u))}const u=t.static.get(e);return u&&a.push(u),a.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const s={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==U||e.includes("*")||e.includes(":")){if(t.type===z)s.wildcard.set(e.replace("/**",""),t.data);else if(t.type===q){const a=_routerNodeToTable("",t);return t.data&&a.static.set("/",t.data),void s.dynamic.set(e.replace(/\/\*|\/:\w+/,""),a)}}else t.data&&s.static.set(e,t.data);for(const[s,a]of t.children.entries())_addNode(`${e}/${s}`.replace("//","/"),a)}(e,t),s}function isPlainObject$2(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu$1(e,t,s=".",a){if(!isPlainObject$2(t))return _defu$1(e,{},s,a);const u=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const c=e[t];null!=c&&(a&&a(u,t,c,s)||(Array.isArray(c)&&Array.isArray(u[t])?u[t]=[...c,...u[t]]:isPlainObject$2(c)&&isPlainObject$2(u[t])?u[t]=_defu$1(c,u[t],(s?`${s}.`:"")+t.toString(),a):u[t]=c))}return u}function createDefu$1(e){return(...t)=>t.reduce(((t,s)=>_defu$1(t,s,"",e)),{})}const W=createDefu$1(),V=createDefu$1(((e,t,s)=>{if(void 0!==e[t]&&"function"==typeof s)return e[t]=s(e[t]),!0}));function o$1(e){throw new Error(`${e} is not implemented yet!`)}let K=class i extends a{__unenv__={};readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new i(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw o$1("Readable.asyncIterator")}iterator(e){throw o$1("Readable.iterator")}map(e,t){throw o$1("Readable.map")}filter(e,t){throw o$1("Readable.filter")}forEach(e,t){throw o$1("Readable.forEach")}reduce(e,t,s){throw o$1("Readable.reduce")}find(e,t){throw o$1("Readable.find")}findIndex(e,t){throw o$1("Readable.findIndex")}some(e,t){throw o$1("Readable.some")}toArray(e){throw o$1("Readable.toArray")}every(e,t){throw o$1("Readable.every")}flatMap(e,t){throw o$1("Readable.flatMap")}drop(e,t){throw o$1("Readable.drop")}take(e,t){throw o$1("Readable.take")}asIndexedPairs(e){throw o$1("Readable.asIndexedPairs")}},G=class extends a{__unenv__={};writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,s){if(this.writableEnded)s&&s();else{if(void 0===this._data)this._data=e;else{const s="string"==typeof this._data?u.from(this._data,this._encoding||t||"utf8"):this._data,a="string"==typeof e?u.from(e,t||this._encoding||"utf8"):e;this._data=u.concat([s,a])}this._encoding=t,s&&s()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,s){const a="string"==typeof t?this._encoding:"utf8",u="function"==typeof t?t:"function"==typeof s?s:void 0;return this._write(e,a,u),!0}setDefaultEncoding(e){return this}end(e,t,s){const a="function"==typeof e?e:"function"==typeof t?t:"function"==typeof s?s:void 0;if(this.writableEnded)return a&&a(),this;const u=e===a?void 0:e;if(u){const e=t===a?void 0:t;this.write(u,e,a)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("Method not implemented.")}};const X=class{allowHalfOpen=!0;_destroy;constructor(e=new K,t=new G){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const s of e)s(...t)}}(e._destroy,t._destroy)}};const J=(Object.assign(X.prototype,K.prototype),Object.assign(X.prototype,G.prototype),X);let Q=class extends J{__unenv__={};bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,s){return!1}connect(e,t,s){return this}end(e,t,s){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}},Y=class extends K{aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new Q}get rawHeaders(){const e=this.headers,t=[];for(const s in e)if(Array.isArray(e[s]))for(const a of e[s])t.push(s,a);else t.push(s,e[s]);return t}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return p(this.headers)}get trailersDistinct(){return p(this.trailers)}};function p(e){const t={};for(const[s,a]of Object.entries(e))s&&(t[s]=(Array.isArray(a)?a:[a]).filter(Boolean));return t}let Z=class extends G{statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,s){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const a=s||t;if(a&&!Array.isArray(a))for(const e in a)this.setHeader(e,a[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const s=this._headers[e],a=[...Array.isArray(s)?s:[s],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=a.length>1?a:a[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}setHeaders(e){for(const[t,s]of Object.entries(e))this.setHeader(t,s);return this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}};const ee=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function S$1(e={}){if(e instanceof Headers)return e;const t=new Headers;for(const[s,a]of Object.entries(e))if(void 0!==a){if(Array.isArray(a)){for(const e of a)t.append(s,String(e));continue}t.set(s,String(a))}return t}const te=new Set([101,204,205,304]);async function b$2(e,t){const s=new Y,a=new Z(s);let u;if(s.url=t.url?.toString()||"/",!s.url.startsWith("/")){const e=new URL(s.url);u=e.host,s.url=e.pathname+e.search+e.hash}s.method=t.method||"GET",s.headers=function(e={}){const t=new ee,s=Array.isArray(e)||function(e){return"function"==typeof e?.entries}(e)?e:Object.entries(e);for(const[e,a]of s)if(a){if(void 0===t[e]){t[e]=a;continue}t[e]=[...Array.isArray(t[e])?t[e]:[t[e]],...Array.isArray(a)?a:[a]]}return t}(t.headers||{}),s.headers.host||(s.headers.host=t.host||u||"localhost"),s.connection.encrypted=s.connection.encrypted||"https"===t.protocol,s.body=t.body||null,s.__unenv__=t.context,await e(s,a);let c=a._data;(te.has(a.statusCode)||"HEAD"===s.method.toUpperCase())&&(c=null,delete a._headers["content-length"]);const l={status:a.statusCode,statusText:a.statusMessage,headers:a._headers,body:c};return s.destroy(),a.destroy(),l}function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError$1(e){if("string"==typeof e)return new H3Error(e);if(isError(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError(e){return!0===e?.constructor?.__h3_error__}function getQuery(e){return getQuery$1(e.path||"")}function getRequestHeaders(e){const t={};for(const s in e.node.req.headers){const a=e.node.req.headers[s];t[s]=Array.isArray(a)?a.filter(Boolean).join(", "):a}return t}function getRequestHeader(e,t){return getRequestHeaders(e)[t.toLowerCase()]}function getRequestURL(e,t={}){const s=function(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"];if(t)return t}return e.node.req.headers.host||"localhost"}(e,t),a=function(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}(e,t),u=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(u,`${a}://${s}`)}const re=Symbol.for("h3RawBody"),ne=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError$1({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,ne);const s=e._requestBody||e.web?.request?.body||e.node.req[re]||e.node.req.rawBody||e.node.req.body;if(s){const e=Promise.resolve(s).then((e=>Buffer.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,s)=>{const a=[];e.pipeTo(new WritableStream({write(e){a.push(e)},close(){t(Buffer.concat(a))},abort(e){s(e)}})).catch(s)})):"function"==typeof e.pipe?new Promise(((t,s)=>{const a=[];e.on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))})).on("error",s)})):e.constructor===Object?Buffer.from(JSON.stringify(e)):e instanceof URLSearchParams?Buffer.from(e.toString()):e instanceof FormData?new Response(e).bytes().then((e=>Buffer.from(e))):Buffer.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||"")&&!String(e.node.req.headers["transfer-encoding"]??"").split(",").map((e=>e.trim())).filter(Boolean).includes("chunked"))return Promise.resolve(void 0);const a=e.node.req[re]=new Promise(((t,s)=>{const a=[];e.node.req.on("error",(e=>{s(e)})).on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))}))}));return t?a.then((e=>e.toString(t))):a}function handleCacheHeaders(e,t){const s=["public",...t.cacheControls||[]];let a=!1;if(void 0!==t.maxAge&&s.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const s=new Date(t.modifiedTime),u=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",s.toUTCString()),u&&new Date(u)>=s&&(a=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(a=!0)}return e.node.res.setHeader("cache-control",s.join(", ")),!!a&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const oe={html:"text/html",json:"application/json"},se=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(se,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let s,a,u,c,l,D=0;const skipWhitespace=()=>{for(;D<e.length&&/\s/.test(e.charAt(D));)D+=1;return D<e.length};for(;D<e.length;){for(s=D,l=!1;skipWhitespace();)if(a=e.charAt(D),","===a){for(u=D,D+=1,skipWhitespace(),c=D;D<e.length&&(a=e.charAt(D),"="!==a&&";"!==a&&","!==a);)D+=1;D<e.length&&"="===e.charAt(D)?(l=!0,D=c,t.push(e.slice(s,u)),s=D):D=u+1}else D+=1;(!l||D>=e.length)&&t.push(e.slice(s))}return t}const ie="undefined"==typeof setImmediate?e=>e():setImmediate;function send(e,t,s){return s&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,s),new Promise((s=>{ie((()=>{e.handled||e.node.res.end(t),s()}))}))}function setResponseStatus(e,t,s){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),s&&(e.node.res.statusMessage=sanitizeStatusMessage(s))}function getResponseStatus(e){return e.node.res.statusCode}function getResponseStatusText(e){return e.node.res.statusMessage}function getResponseHeader(e,t){return e.node.res.getHeader(t)}function setResponseHeaders(e,t){for(const[s,a]of Object.entries(t))e.node.res.setHeader(s,a)}const ae=setResponseHeaders;function setResponseHeader(e,t,s){e.node.res.setHeader(t,s)}function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((s,a)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),s()})),t.on("error",(e=>{a(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[s,a]of t.headers)"set-cookie"===s?e.node.res.appendHeader(s,splitCookiesString(a)):e.node.res.setHeader(s,a);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const ue=new Set(["PATCH","POST","PUT","DELETE"]),ce=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,s={}){let a,u;ue.has(e.method)&&(s.streamRequest?(a=function(e){if(!ne.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(re in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const s=await readRawBody(e,!1);s&&t.enqueue(s),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}}))}(e),u="half"):a=await readRawBody(e,!1).catch((()=>{})));const c=s.fetchOptions?.method||e.method,l=function(e,...t){const s=t.filter(Boolean);if(0===s.length)return e;const a=new Headers(e);for(const e of s){const t=Array.isArray(e)?e:"function"==typeof e.entries?e.entries():Object.entries(e);for(const[e,s]of t)void 0!==s&&a.set(e,s)}return a}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),s.fetchOptions?.headers,s.headers);return async function(e,t,s={}){let a;try{a=await _getFetch(s.fetch)(t,{headers:s.headers,ignoreResponseError:!0,...s.fetchOptions})}catch(e){throw createError$1({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(a.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(a.statusText);const u=[];for(const[t,s]of a.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,s):u.push(...splitCookiesString(s)));u.length>0&&e.node.res.setHeader("set-cookie",u.map((e=>(s.cookieDomainRewrite&&(e=rewriteCookieProperty(e,s.cookieDomainRewrite,"domain")),s.cookiePathRewrite&&(e=rewriteCookieProperty(e,s.cookiePathRewrite,"path")),e))));s.onResponse&&await s.onResponse(e,a);if(void 0!==a._data)return a._data;if(e.handled)return;if(!1===s.sendStream){const t=new Uint8Array(await a.arrayBuffer());return e.node.res.end(t)}if(a.body)for await(const t of a.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...s,fetchOptions:{method:c,body:a,duplex:u,...s.fetchOptions,headers:l}})}function getProxyRequestHeaders(e,t){const s=Object.create(null),a=getRequestHeaders(e);for(const e in a)(!ce.has(e)||"host"===e&&t?.host)&&(s[e]=a[e]);return s}function fetchWithEvent(e,t,s,a){return _getFetch(a?.fetch)(t,{...s,context:s?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...s?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,s){const a="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${s}=)([^;]+)`,"gi"),((e,t,s)=>{let u;if(s in a)u=a[s];else{if(!("*"in a))return e;u=a["*"]}return u?t+u:""}))}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[s,a]of Object.entries(e))if(Array.isArray(a))for(const e of a)t.append(s,e);else a&&t.set(s,a);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=s=>async function(e,t,s){if(s.onRequest)for(const t of s.onRequest)if(await t(e),e.handled)return;const a=await t(e),u={body:a};if(s.onBeforeResponse)for(const t of s.onBeforeResponse)await t(e,u);return u.body}(s,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const le=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,s){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",s&&"/"!==s?`\n     Route: ${s}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,s;const resolveHandler=()=>s?Promise.resolve(s):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return s={handler:toEventHandler(e.default||e)},s}))),t),a=le((e=>s?s.handler(e):resolveHandler().then((t=>t.handler(e)))));return a.__resolve__=resolveHandler,a};function createApp(e={}){const t=[],s=function(e,t){const s=t.debug?2:void 0;return le((async a=>{a.node.req.originalUrl=a.node.req.originalUrl||a.node.req.url||"/";const u=a._path||a.node.req.url||"/";let c;t.onRequest&&await t.onRequest(a);for(const l of e){if(l.route.length>1){if(!u.startsWith(l.route))continue;c=u.slice(l.route.length)||"/"}else c=u;if(l.match&&!l.match(c,a))continue;a._path=c,a.node.req.url=c;const e=await l.handler(a),D=void 0===e?void 0:await e;if(void 0!==D){const e={body:D};return t.onBeforeResponse&&(a._onBeforeResponseCalled=!0,await t.onBeforeResponse(a,e)),await handleHandlerResponse(a,e.body,s),void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,e)))}if(a.handled)return void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0)))}if(!a.handled)throw createError$1({statusCode:404,statusMessage:`Cannot find any path matching ${a.path||"/"}.`});t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0))}))}(t,e),a=function(e){return async t=>{let s;for(const a of e){if("/"===a.route&&!a.handler.__resolve__)continue;if(!t.startsWith(a.route))continue;if(s=t.slice(a.route.length)||"/",a.match&&!a.match(s,void 0))continue;let e={route:a.route,handler:a.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(s);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);s.__resolve__=a;const u=function(e){let t;return()=>(t||(t=e()),t)}((()=>{return t=a,{...e.websocket,async resolve(e){const s=e.request?.url||e.url||"/",{pathname:a}="string"==typeof s?parseURL(s):s,u=await t(a);return u?.handler?.__websocket__||{}}};var t})),c={use:(e,t,s)=>use(c,e,t,s),resolve:a,handler:s,stack:t,options:e,get websocket(){return u()}};return c}function use(e,t,s,a){if(Array.isArray(t))for(const u of t)use(e,u,s,a);else if(Array.isArray(s))for(const u of s)use(e,t,u,a);else"string"==typeof t?e.stack.push(normalizeLayer({...a,route:t,handler:s})):"function"==typeof t?e.stack.push(normalizeLayer({...s,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,s){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const s=sanitizeStatusCode(t,204);204===s&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(s),e.node.res.end()}(e);if(t){if(a=t,"undefined"!=typeof Response&&a instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((s=>send(e,Buffer.from(s),t.type)));if(t instanceof Error)throw createError$1(t);if("function"==typeof t.end)return!0}var a;const u=typeof t;if("string"===u)return send(e,t,oe.html);if("object"===u||"boolean"===u||"number"===u)return send(e,JSON.stringify(t,void 0,s),oe.json);if("bigint"===u)return send(e,t.toString(),oe.json);throw createError$1({statusCode:500,statusMessage:`[h3] Cannot send ${u} as response.`})}const De=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,s){const a=createEvent(t,s);try{await e.handler(a)}catch(t){const s=createError$1(t);if(isError(t)||(s.unhandled=!0),setResponseStatus(a,s.statusCode,s.statusMessage),e.options.onError&&await e.options.onError(s,a),a.handled)return;(s.unhandled||s.fatal)&&console.error("[h3]",s.fatal?"[fatal]":"[unhandled]",s),e.options.onBeforeResponse&&!a._onBeforeResponseCalled&&await e.options.onBeforeResponse(a,{body:s}),await function(e,t,s){if(e.handled)return;const a=isError(t)?t:createError$1(t),u={statusCode:a.statusCode,statusMessage:a.statusMessage,stack:[],data:a.data};if(s&&(u.stack=(a.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(a.statusCode),a.statusMessage),e.node.res.setHeader("content-type",oe.json),e.node.res.end(JSON.stringify(u,void 0,2))}(a,s,!!e.options.debug),e.options.onAfterResponse&&!a._onAfterResponseCalled&&await e.options.onAfterResponse(a,{body:s})}}}function flatHooks(e,t={},s){for(const a in e){const u=e[a],c=s?`${s}:${a}`:a;"object"==typeof u&&null!==u?flatHooks(u,t,c):"function"==typeof u&&(t[c]=u)}return t}const de={run:e=>e()},he=void 0!==console.createTask?console.createTask:()=>de;function serialTaskCaller(e,t){const s=t.shift(),a=he(s);return e.reduce(((e,s)=>e.then((()=>a.run((()=>s(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const s=t.shift(),a=he(s);return Promise.all(e.map((e=>a.run((()=>e(...t))))))}function callEachWith(e,t){for(const s of[...e])s(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,s={}){if(!e||"function"!=typeof t)return()=>{};const a=e;let u;for(;this._deprecatedHooks[e];)u=this._deprecatedHooks[e],e=u.to;if(u&&!s.allowDeprecated){let e=u.message;e||(e=`${a} hook has been deprecated`+(u.to?`, please use ${u.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let s,_function=(...e)=>("function"==typeof s&&s(),s=void 0,_function=void 0,t(...e));return s=this.hook(e,_function),s}removeHook(e,t){if(this._hooks[e]){const s=this._hooks[e].indexOf(t);-1!==s&&this._hooks[e].splice(s,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const s=this._hooks[e]||[];delete this._hooks[e];for(const t of s)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),s=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of s.splice(0,s.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...s){const a=this._before||this._after?{name:t,args:s,context:{}}:void 0;this._before&&callEachWith(this._before,a);const u=e(t in this._hooks?[...this._hooks[t]]:[],s);return u instanceof Promise?u.finally((()=>{this._after&&a&&callEachWith(this._after,a)})):(this._after&&a&&callEachWith(this._after,a),u)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function createHooks(){return new Hookable}const fe=globalThis.Headers,pe=globalThis.AbortController,ge=globalThis.fetch||(()=>{throw new Error("[node-fetch-native] Failed to fetch: `globalThis.fetch` is not available!")});class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const me=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return me.has(e.toUpperCase())}const Fe=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ye=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,s,a){const u=function(e,t,s){if(!t)return new s(e);const a=new s(t);if(e)for(const[t,u]of Symbol.iterator in e||Array.isArray(e)?e:new s(e))a.set(t,u);return a}(t?.headers??e?.headers,s?.headers,a);let c;return(s?.query||s?.params||t?.params||t?.query)&&(c={...s?.params,...s?.query,...t?.params,...t?.query}),{...s,...t,query:c,params:c,headers:u}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const s of t)await s(e);else await t(e)}const Ee=new Set([408,409,425,429,500,502,503,504]),Ce=new Set([101,204,205,304]);function createFetch(e={}){const{fetch:t=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:a=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const s=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(s):Ee.has(s))){const s="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return s>0&&await new Promise((e=>setTimeout(e,s))),$fetchRaw(e.request,{...e.options,retry:t-1})}}const s=function(e){const t=e.error?.message||e.error?.toString()||"",s=e.request?.method||e.options?.method||"GET",a=e.request?.url||String(e.request)||"/",u=`[${s}] ${JSON.stringify(a)}`,c=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",l=new FetchError(`${u}: ${c}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(l,t,{get:()=>e[t]});for(const[t,s]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(l,t,{get:()=>e.response&&e.response[s]});return l}(e);throw Error.captureStackTrace&&Error.captureStackTrace(s,$fetchRaw),s}const $fetchRaw=async function(u,c={}){const l={request:u,options:resolveFetchOptions(u,c,e.defaults,s),response:void 0,error:void 0};let D;if(l.options.method&&(l.options.method=l.options.method.toUpperCase()),l.options.onRequest&&await callHooks(l,l.options.onRequest),"string"==typeof l.request&&(l.options.baseURL&&(l.request=withBase(l.request,l.options.baseURL)),l.options.query&&(l.request=withQuery(l.request,l.options.query),delete l.options.query),"query"in l.options&&delete l.options.query,"params"in l.options&&delete l.options.params),l.options.body&&isPayloadMethod(l.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(l.options.body)?("pipeTo"in l.options.body&&"function"==typeof l.options.body.pipeTo||"function"==typeof l.options.body.pipe)&&("duplex"in l.options||(l.options.duplex="half")):(l.options.body="string"==typeof l.options.body?l.options.body:JSON.stringify(l.options.body),l.options.headers=new s(l.options.headers||{}),l.options.headers.has("content-type")||l.options.headers.set("content-type","application/json"),l.options.headers.has("accept")||l.options.headers.set("accept","application/json"))),!l.options.signal&&l.options.timeout){const e=new a;D=setTimeout((()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)}),l.options.timeout),l.options.signal=e.signal}try{l.response=await t(l.request,l.options)}catch(e){return l.error=e,l.options.onRequestError&&await callHooks(l,l.options.onRequestError),await onError(l)}finally{D&&clearTimeout(D)}if((l.response.body||l.response._bodyInit)&&!Ce.has(l.response.status)&&"HEAD"!==l.options.method){const e=(l.options.parseResponse?"json":l.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return ye.test(t)?"json":Fe.has(t)||t.startsWith("text/")?"text":"blob"}(l.response.headers.get("content-type")||"");switch(e){case"json":{const e=await l.response.text(),t=l.options.parseResponse||destr;l.response._data=t(e);break}case"stream":l.response._data=l.response.body||l.response._bodyInit;break;default:l.response._data=await l.response[e]()}}return l.options.onResponse&&await callHooks(l,l.options.onResponse),!l.options.ignoreResponseError&&l.response.status>=400&&l.response.status<600?(l.options.onResponseError&&await callHooks(l,l.options.onResponseError),await onError(l)):l.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},s={})=>createFetch({...e,...s,defaults:{...e.defaults,...s.defaults,...t}}),$fetch}const we=globalThis.fetch?(...e)=>globalThis.fetch(...e):function(){if(!JSON.parse(e.env.FETCH_KEEP_ALIVE||"false"))return ge;const a={keepAlive:!0},u=new t.Agent(a),c=new s.Agent(a),l={agent:e=>"http:"===e.protocol?u:c};return function(e,t){return ge(e,{...l,...t})}}(),be=globalThis.Headers||fe,ve=globalThis.AbortController||pe,_e=createFetch({fetch:we,Headers:be,AbortController:ve});function asyncCall(e,...t){try{return(s=e(...t))&&"function"==typeof s.then?s:Promise.resolve(s)}catch(e){return Promise.reject(e)}var s}function stringify(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ae="base64:";function serializeRaw(e){return"string"==typeof e?e:Ae+function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function deserializeRaw(e){return"string"!=typeof e?e:e.startsWith(Ae)?function(e){if(globalThis.Buffer)return Buffer.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}const Be=["has","hasItem","get","getItem","getItemRaw","set","setItem","setItemRaw","del","remove","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$1(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys(...e){return normalizeKey$1(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$1(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,s){e.set(t,s)},setItemRaw(t,s){e.set(t,s)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,s){return e.watch?e.watch(((e,a)=>t(e,s+a))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const Re={},normalizeKey=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},Se={getKeys:()=>Promise.resolve(Object.keys(Re)),hasItem:e=>(e=normalizeKey(e),Promise.resolve(e in Re)),getItem:e=>(e=normalizeKey(e),Promise.resolve(Re[e]?Re[e].import():null)),getMeta:e=>(e=normalizeKey(e),Promise.resolve(Re[e]?Re[e].meta:{}))};function createError(e,t,s){const a=new Error(`[unstorage] [${e}] ${t}`,s);return Error.captureStackTrace&&Error.captureStackTrace(a,createError),a}function ignoreNotfound(e){return"ENOENT"===e.code||"EISDIR"===e.code?null:e}function ignoreExists(e){return"EEXIST"===e.code?null:e}async function writeFile(e,t,s){return await ensuredir(d(e)),C.writeFile(e,t,s)}function readFile(e,t){return C.readFile(e,t).catch(ignoreNotfound)}function readdir(e){return C.readdir(e,{withFileTypes:!0}).catch(ignoreNotfound).then((e=>e||[]))}async function ensuredir(e){w(e)||(await ensuredir(d(e)).catch(ignoreExists),await C.mkdir(e).catch(ignoreExists))}async function readdirRecursive(e,t,s){if(t&&t(e))return[];const a=await readdir(e),u=[];return await Promise.all(a.map((async a=>{const c=D(e,a.name);if(a.isDirectory()){if(void 0===s||s>0){const e=await readdirRecursive(c,t,void 0===s?void 0:s-1);u.push(...e.map((e=>a.name+"/"+e)))}}else t&&t(a.name)||u.push(a.name)}))),u}async function rmRecursive(e){const t=await readdir(e);await Promise.all(t.map((t=>{const s=D(e,t.name);return t.isDirectory()?rmRecursive(s).then((()=>C.rmdir(s))):C.unlink(s)})))}const Ie=/\.\.:|\.\.$/,xe="fs-lite",unstorage_47drivers_47fs_45lite=(e={})=>{if(!e.base)throw t=xe,s="base",Array.isArray(s)?createError(t,`Missing some of the required options ${s.map((e=>"`"+e+"`")).join(", ")}`):createError(t,`Missing required option \`${s}\`.`);var t,s;e.base=D(e.base);const r=t=>{if(Ie.test(t))throw createError(xe,`Invalid key: ${JSON.stringify(t)}. It should not contain .. segments`);return h(e.base,t.replace(/:/g,"/"))};return{name:xe,options:e,flags:{maxDepth:!0},hasItem:e=>w(r(e)),getItem:e=>readFile(r(e),"utf8"),getItemRaw:e=>readFile(r(e)),async getMeta(e){const{atime:t,mtime:s,size:a,birthtime:u,ctime:c}=await C.stat(r(e)).catch((()=>({})));return{atime:t,mtime:s,size:a,birthtime:u,ctime:c}},setItem(t,s){if(!e.readOnly)return writeFile(r(t),s,"utf8")},setItemRaw(t,s){if(!e.readOnly)return writeFile(r(t),s)},removeItem(t){var s;if(!e.readOnly)return s=r(t),C.unlink(s).catch(ignoreNotfound)},getKeys:(t,s)=>readdirRecursive(r("."),e.ignore,s?.maxDepth),async clear(){e.readOnly||e.noClear||await rmRecursive(r("."))}}},Te=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const s of t.mountpoints)if(e.startsWith(s))return{base:s,relativeKey:e.slice(s.length),driver:t.mounts[s]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,s)=>t.mountpoints.filter((t=>t.startsWith(e)||s&&e.startsWith(t))).map((s=>({relativeBase:e.length>s.length?e.slice(s.length):void 0,mountpoint:s,driver:t.mounts[s]}))),onChange=(e,s)=>{if(t.watching){s=normalizeKey$1(s);for(const a of t.watchListeners)a(e,s)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,s)=>{const a=new Map,getBatch=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const s of e){const e="string"==typeof s,a=normalizeKey$1(e?s:s.key),u=e?void 0:s.value,c=e||!s.options?t:{...t,...s.options},l=getMount(a);getBatch(l).items.push({key:a,value:u,relativeKey:l.relativeKey,options:c})}return Promise.all([...a.values()].map((e=>s(e)))).then((e=>e.flat()))},s={hasItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.hasItem,s,t)},getItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.getItem,s,t).then((e=>destr(e)))},getItems:(e,t={})=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return a.getItemRaw?asyncCall(a.getItemRaw,s,t):asyncCall(a.getItem,s,t).then((e=>deserializeRaw(e)))},async setItem(e,t,a={}){if(void 0===t)return s.removeItem(e);e=normalizeKey$1(e);const{relativeKey:u,driver:c}=getMount(e);c.setItem&&(await asyncCall(c.setItem,u,stringify(t),a),c.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify(t.value),t.options))))}))},async setItemRaw(e,t,a={}){if(void 0===t)return s.removeItem(e,a);e=normalizeKey$1(e);const{relativeKey:u,driver:c}=getMount(e);if(c.setItemRaw)await asyncCall(c.setItemRaw,u,t,a);else{if(!c.setItem)return;await asyncCall(c.setItem,u,serializeRaw(t),a)}c.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);a.removeItem&&(await asyncCall(a.removeItem,s,t),(t.removeMeta||t.removeMata)&&await asyncCall(a.removeItem,s+"$",t),a.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e),u=Object.create(null);if(a.getMeta&&Object.assign(u,await asyncCall(a.getMeta,s,t)),!t.nativeOnly){const e=await asyncCall(a.getItem,s+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(u,e))}return u},setMeta(e,t,s={}){return this.setItem(e+"$",t,s)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const s=getMounts(e,!0);let a=[];const u=[];let c=!0;for(const e of s){e.driver.flags?.maxDepth||(c=!1);const s=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of s){const s=e.mountpoint+normalizeKey$1(t);a.some((e=>s.startsWith(e)))||u.push(s)}a=[e.mountpoint,...a.filter((t=>!t.startsWith(e.mountpoint)))]}const l=void 0!==t.maxDepth&&!c;return u.filter((s=>(!l||function(e,t){if(void 0===t)return!0;let s=0,a=e.indexOf(":");for(;a>-1;)s++,a=e.indexOf(":",a+1);return s<=t}(s,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(s,e)))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const s=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(s.map((s=>e.driver.removeItem(s,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,a){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=a,t.watching&&Promise.resolve(watch(a,onChange,e)).then((s=>{t.unwatch[e]=s})).catch(console.error),s},async unmount(e,s=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),s&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$1(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$1(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>s.getKeys(e,t),get:(e,t={})=>s.getItem(e,t),set:(e,t,a={})=>s.setItem(e,t,a),has:(e,t={})=>s.hasItem(e,t),del:(e,t={})=>s.removeItem(e,t),remove:(e,t={})=>s.removeItem(e,t)};return s}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const s={...e};for(const a of Be)s[a]=(s="",...u)=>e[a](t+s,...u);return s.getKeys=(s="",...a)=>e.getKeys(t+s,...a).then((e=>e.map((e=>e.slice(t.length))))),s.getItems=async(s,a)=>{const u=s.map((e=>"string"==typeof e?t+e:{...e,key:t+e.key}));return(await e.getItems(u,a)).map((e=>({key:e.key.slice(t.length),value:e.value})))},s.setItems=async(s,a)=>{const u=s.map((e=>({key:t+e.key,value:e.value,options:e.options})));return e.setItems(u,a)},s}(Te,e):Te}function serialize$1(e){return"string"==typeof e?`'${e}'`:(new $e).serialize(e)}Te.mount("/assets",Se),Te.mount("data",unstorage_47drivers_47fs_45lite({driver:"fsLite",base:"./.data/kv"}));const $e=function(){class o{#e=new Map;compare(e,t){const s=typeof e,a=typeof t;return"string"===s&&"string"===a?e.localeCompare(t):"number"===s&&"number"===a?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(null===e)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if("[object Object]"!==t)return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const s=e.constructor,a=s===Object||void 0===s?"":s.name;if(""!==a&&globalThis[a]===s)return this.serializeBuiltInType(a,e);if("function"==typeof e.toJSON){const t=e.toJSON();return a+(null!==t&&"object"==typeof t?this.$object(t):`(${this.serialize(t)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,t){const s=this["$"+e];if(s)return s.call(this,t);if("function"==typeof t?.entries)return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const s=Array.from(t).sort(((e,t)=>this.compare(e[0],t[0])));let a=`${e}{`;for(let e=0;e<s.length;e++){const[t,u]=s[e];a+=`${this.serialize(t,!0)}:${this.serialize(u)}`,e<s.length-1&&(a+=",")}return a+"}"}$object(e){let t=this.#e.get(e);return void 0===t&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return"[native code] }"===t.slice(-15)?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let s=0;s<e.length;s++)t+=this.serialize(e[s]),s<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort(((e,t)=>this.compare(e,t))))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const e of["Error","RegExp","URL"])o.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return o}();function isEqual(e,t){return e===t||serialize$1(e)===serialize$1(t)}const Oe=globalThis.process?.getBuiltinModule?.("crypto")?.hash,ke="sha256",je="base64url";function digest(e){if(Oe)return Oe(ke,e,je);const t=c(ke).update(e);return globalThis.process?.versions?.webcontainer?t.digest().toString(je):t.digest(je)}function hash$1(e){return digest(serialize$1(e))}const Pe=(()=>{class Hasher2{buff="";#t=new Map;write(e){this.buff+=e}dispatch(e){return this[null===e?"null":typeof e](e)}object(e){if(e&&"function"==typeof e.toJSON)return this.object(e.toJSON());const t=Object.prototype.toString.call(e);let s="";const a=t.length;s=a<10?"unknown:["+t+"]":t.slice(8,a-1),s=s.toLowerCase();let u=null;if(void 0!==(u=this.#t.get(e)))return this.dispatch("[CIRCULAR:"+u+"]");if(this.#t.set(e,this.#t.size),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e))return this.write("buffer:"),this.write(e.toString("utf8"));if("object"!==s&&"function"!==s&&"asyncfunction"!==s)this[s]?this[s](e):this.unknown(e,s);else{const t=Object.keys(e).sort(),s=[];this.write("object:"+(t.length+s.length)+":");const dispatchForKey=t=>{this.dispatch(t),this.write(":"),this.dispatch(e[t]),this.write(",")};for(const e of t)dispatchForKey(e);for(const e of s)dispatchForKey(e)}}array(e,t){if(t=void 0!==t&&t,this.write("array:"+e.length+":"),!t||e.length<=1){for(const t of e)this.dispatch(t);return}const s=new Map,a=e.map((e=>{const t=new Hasher2;t.dispatch(e);for(const[e,a]of t.#t)s.set(e,a);return t.toString()}));return this.#t=s,a.sort(),this.array(a,!1)}date(e){return this.write("date:"+e.toJSON())}symbol(e){return this.write("symbol:"+e.toString())}unknown(e,t){if(this.write(t),e)return this.write(":"),e&&"function"==typeof e.entries?this.array([...e.entries()],!0):void 0}error(e){return this.write("error:"+e.toString())}boolean(e){return this.write("bool:"+e)}string(e){this.write("string:"+e.length+":"),this.write(e)}function(e){this.write("fn:"),!function(e){if("function"!=typeof e)return!1;return"[native code] }"===Function.prototype.toString.call(e).slice(-15)}(e)?this.dispatch(e.toString()):this.dispatch("[native]")}number(e){return this.write("number:"+e)}null(){return this.write("Null")}undefined(){return this.write("Undefined")}regexp(e){return this.write("regex:"+e.toString())}arraybuffer(e){return this.write("arraybuffer:"),this.dispatch(new Uint8Array(e))}url(e){return this.write("url:"+e.toString())}map(e){this.write("map:");const t=[...e];return this.array(t,!1)}set(e){this.write("set:");const t=[...e];return this.array(t,!1)}bigint(e){return this.write("bigint:"+e.toString())}}for(const e of["uint8array","uint8clampedarray","unt8array","uint16array","unt16array","uint32array","unt32array","float32array","float64array"])Hasher2.prototype[e]=function(t){return this.write(e+":"),this.array([...t],!1)};return Hasher2})();function hash(e){return digest("string"==typeof e?e:function(e){const t=new Pe;return t.dispatch(e),t.buff}(e)).replace(/[-_]/g,"").slice(0,10)}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const s={},a=t.group||"nitro/functions",u=t.name||e.name||"_",c=t.integrity||hash([e,t]),l=t.validate||(e=>void 0!==e.value);return async(...D)=>{if(await(t.shouldBypassCache?.(...D)))return e(...D);const d=await(t.getKey||getKey)(...D),h=await(t.shouldInvalidateCache?.(...D)),f=await async function(e,D,d,h){const f=[t.base,a,u,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let g=await useStorage().getItem(f).catch((e=>{console.error("[cache] Cache read error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}))||{};if("object"!=typeof g){g={};const e=new Error("Malformed data read from cache.");console.error("[cache]",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}const m=1e3*(t.maxAge??0);m&&(g.expires=Date.now()+m);const F=d||g.integrity!==c||m&&Date.now()-(g.mtime||0)>m||!1===l(g),y=F?(async()=>{const a=s[e];a||(void 0!==g.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(g.value=void 0,g.integrity=void 0,g.mtime=void 0,g.expires=void 0),s[e]=Promise.resolve(D()));try{g.value=await s[e]}catch(t){throw a||delete s[e],t}if(!a&&(g.mtime=Date.now(),g.integrity=c,delete s[e],!1!==l(g))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const s=useStorage().setItem(f,g,e).catch((e=>{console.error("[cache] Cache write error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}));h?.waitUntil&&h.waitUntil(s)}})():Promise.resolve();return void 0===g.value?await y:F&&h&&h.waitUntil&&h.waitUntil(y),t.swr&&!1!==l(g)?(y.catch((e=>{console.error("[cache] SWR handler error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})})),g):y.then((()=>g))}(d,(()=>e(...D)),h,D[0]&&isEvent(D[0])?D[0]:void 0);let g=f.value;return t.transform&&(g=await t.transform(f,...D)||g),g}}function getKey(...e){return e.length>0?hash(e):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function defineCachedEventHandler(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const s=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),a={...t,getKey:async e=>{const a=await(t.getKey?.(e));if(a)return escapeKey(a);const u=e.node.req.originalUrl||e.node.req.url||e.path;let c;try{c=escapeKey(decodeURI(parseURL(u).pathname)).slice(0,16)||"index"}catch{c="-"}return[`${c}.${hash(u)}`,...s.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${hash(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},u=function(e,t={}){return defineCachedFunction(e,t)}((async u=>{const c={};for(const e of s){const t=u.node.req.headers[e];void 0!==t&&(c[e]=t)}const l=cloneWithProxy(u.node.req,{headers:c}),D={};let d;const h=createEvent(l,cloneWithProxy(u.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>D[e],setHeader(e,t){return D[e]=t,this},getHeaderNames:()=>Object.keys(D),hasHeader:e=>e in D,removeHeader(e){delete D[e]},getHeaders:()=>D,end(e,t,s){return"string"==typeof e&&(d=e),"function"==typeof t&&t(),"function"==typeof s&&s(),this},write:(e,t,s)=>("string"==typeof e&&(d=e),"function"==typeof t&&t(void 0),"function"==typeof s&&s(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const s=t[e];void 0!==s&&this.setHeader(e,s)}}return this}}));h.fetch=(e,t)=>fetchWithEvent(h,e,t,{fetch:useNitroApp().localFetch}),h.$fetch=(e,t)=>fetchWithEvent(h,e,t,{fetch:globalThis.$fetch}),h.waitUntil=u.waitUntil,h.context=u.context,h.context.cache={options:a};const f=await e(h)||d,g=h.node.res.getHeaders();g.etag=String(g.Etag||g.etag||`W/"${hash(f)}"`),g["last-modified"]=String(g["Last-Modified"]||g["last-modified"]||(new Date).toUTCString());const m=[];t.swr?(t.maxAge&&m.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?m.push(`stale-while-revalidate=${t.staleMaxAge}`):m.push("stale-while-revalidate")):t.maxAge&&m.push(`max-age=${t.maxAge}`),m.length>0&&(g["cache-control"]=m.join(", "));return{code:h.node.res.statusCode,headers:g,body:f}}),a);return defineEventHandler((async s=>{if(t.headersOnly){if(handleCacheHeaders(s,{maxAge:t.maxAge}))return;return e(s)}const a=await u(s);if(s.node.res.headersSent||s.node.res.writableEnded)return a.body;if(!handleCacheHeaders(s,{modifiedTime:new Date(a.headers["last-modified"]),etag:a.headers.etag,maxAge:t.maxAge})){s.node.res.statusCode=a.code;for(const e in a.headers){const t=a.headers[e];"set-cookie"===e?s.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&s.node.res.setHeader(e,t)}return a.body}}))}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,s,a)=>s in t?t[s]:Reflect.get(e,s,a),set:(e,s,a,u)=>s in t?(t[s]=a,!0):Reflect.set(e,s,a,u)})}const Le=defineCachedEventHandler;function klona(e){if("object"!=typeof e)return e;var t,s,a=Object.prototype.toString.call(e);if("[object Object]"===a){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in s=new e.constructor,e)e.hasOwnProperty(t)&&s[t]!==e[t]&&(s[t]=klona(e[t]));else for(t in s={},e)"__proto__"===t?Object.defineProperty(s,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):s[t]=klona(e[t]);return s}if("[object Array]"===a){for(t=e.length,s=Array(t);t--;)s[t]=klona(e[t]);return s}return"[object Set]"===a?(s=new Set,e.forEach((function(e){s.add(klona(e))})),s):"[object Map]"===a?(s=new Map,e.forEach((function(e,t){s.set(klona(t),klona(e))})),s):"[object Date]"===a?new Date(+e):"[object RegExp]"===a?((s=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,s):"[object DataView]"===a?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===a?e.slice(0):"Array]"===a.slice(-6)?new e.constructor(e):e}const He=V({nuxt:{},icon:{provider:"server",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500},ui:{primary:"green",gray:"cool",colors:["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","primary"],strategy:"merge"}}),Ne=/\d/,Me=["-","_","/","."];function isUppercase(e=""){if(!Ne.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=Me,s=[];if(!e||"string"!=typeof e)return s;let a,u,c="";for(const l of e){const e=t.includes(l);if(!0===e){s.push(c),c="",a=void 0;continue}const D=isUppercase(l);if(!1===u){if(!1===a&&!0===D){s.push(c),c=l,a=D;continue}if(!0===a&&!1===D&&c.length>1){const e=c.at(-1);s.push(c.slice(0,Math.max(0,c.length-1))),c=e+l,a=D;continue}}c+=l,a=D,u=e}return s.push(c),s}(e)).map((e=>e.toLowerCase())).join(t):""}function getEnv$1(t,s){const a=(u=t,kebabCase(u||"","_")).toUpperCase();var u;return destr(e.env[s.prefix+a]??e.env[s.altPrefix+a])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(t,s,a=""){for(const u in t){const c=a?`${a}_${u}`:u,l=getEnv$1(c,s);_isObject(t[u])?_isObject(l)?(t[u]={...t[u],...l},applyEnv(t[u],s,c)):void 0===l?applyEnv(t[u],s,c):t[u]=l??t[u]:t[u]=l??t[u],s.envExpansion&&"string"==typeof t[u]&&(t[u]=t[u].replace(Ue,((t,s)=>e.env[s]||t)))}return t}const Ue=/\{\{([^{}]*)\}\}/g;const ze={app:{baseURL:"/",buildId:"30a6b78b-7d9d-4726-814f-8cad57a10a19",buildAssetsDir:"/_nuxt/",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1,isr:!1},"/_nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/_nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/_nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{apiUrl:"https://restcountries.com/v3.1"},icon:{serverKnownCssClasses:[]},ipx:{baseURL:"/_ipx",alias:{},fs:{dir:"../../static"},http:{domains:[]}}},qe={prefix:"NITRO_",altPrefix:ze.nitro.envPrefix??e.env.NITRO_ENV_PREFIX??"_",envExpansion:ze.nitro.envExpansion??e.env.NITRO_ENV_EXPANSION??!1},We=_deepFreeze(applyEnv(klona(ze),qe));function useRuntimeConfig(e){if(!e)return We;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(ze);return applyEnv(t,qe),e.context.nitro.runtimeConfig=t,t}const Ve=_deepFreeze(klona(He));function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const s of t){const t=e[s];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const s=useRuntimeConfig();if(t in s)return s[t]}});const Ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{},Ge="__unctx__",Xe=Ke[Ge]||(Ke[Ge]=function(e={}){const t={};return{get:(s,a={})=>(t[s]||(t[s]=function(e={}){let t,s=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let a;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?a=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(a){const e=a.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,a)=>{a||checkConflict(e),t=e,s=!0},unset:()=>{t=void 0,s=!1},call:(e,u)=>{checkConflict(e),t=e;try{return a?a.run(e,u):u()}finally{s||(t=void 0)}},async callAsync(e,u){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;Qe.add(onLeave);try{const c=a?a.run(e,u):u();return s||(t=void 0),await c}finally{Qe.delete(onLeave)}}}}({...e,...a})),t[s])}}()),getContext=(e,t={})=>Xe.get(e,t),Je="__unctx_async_handlers__",Qe=Ke[Je]||(Ke[Je]=new Set);function executeAsync(e){const t=[];for(const e of Qe){const s=e();s&&t.push(s)}const restore=()=>{for(const e of t)e()};let s=e();return s&&"object"==typeof s&&"catch"in s&&(s=s.catch((e=>{throw restore(),e}))),[s,restore]}const Ye=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return le((t=>{const s=getRouteRules(t);if(s.headers&&ae(t,s.headers),s.redirect){let e=s.redirect.to;if(e.endsWith("/**")){let a=t.path;const u=s.redirect._redirectStripBase;u&&(a=withoutBase(a,u)),e=joinURL(e.slice(0,-3),a)}else if(t.path.includes("?")){e=withQuery(e,getQuery$1(t.path))}return function(e,t,s=302){return e.node.res.statusCode=sanitizeStatusCode(s,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,oe.html)}(t,e,s.redirect.statusCode)}if(s.proxy){let a=s.proxy.to;if(a.endsWith("/**")){let e=t.path;const u=s.proxy._proxyStripBase;u&&(e=withoutBase(e,u)),a=joinURL(a.slice(0,-3),e)}else if(t.path.includes("?")){a=withQuery(a,getQuery$1(t.path))}return proxyRequest(t,a,{fetch:e.localFetch,...s.proxy})}}))}function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return W({},...Ye.matchAll(e).reverse())}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[s,a]of e)if("set-cookie"===s)for(const e of normalizeCookieHeader(a))t.append("set-cookie",e);else t.set(s,joinHeaders(a));return t}function hasReqHeader(e,t,s){const a=getRequestHeader(e,t);return a&&"string"==typeof a&&a.toLowerCase().includes(s)}function defaultHandler(e,t,s){const a=e.unhandled||e.fatal,u=e.statusCode||500,c=e.statusMessage||"Server Error",l=getRequestURL(t,{xForwardedHost:!0,xForwardedProto:!0});if(404===u){const e="/";if(/^\/[^/]/.test(e)&&!l.pathname.startsWith(e)){return{status:302,statusText:"Found",headers:{location:`${e}${l.pathname.slice(1)}${l.search}`},body:"Redirecting..."}}}if(a&&!s?.silent){const s=[e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(`[request error] ${s} [${t.method}] ${l}\n`,e)}const D={"content-type":"application/json","x-content-type-options":"nosniff","x-frame-options":"DENY","referrer-policy":"no-referrer","content-security-policy":"script-src 'none'; frame-ancestors 'none';"};setResponseStatus(t,u,c),404!==u&&getResponseHeader(t,"cache-control")||(D["cache-control"]="no-cache");return{status:u,statusText:c,headers:D,body:{error:!0,url:l.href,statusCode:u,statusMessage:c,message:a?"Server Error":e.message,data:a?void 0:e.data}}}const Ze=[async function(e,t,{defaultHandler:s}){if(t.handled||function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t))return;const a=await s(e,t,{json:!0});if(404===(e.statusCode||500)&&302===a.status)return setResponseHeaders(t,a.headers),setResponseStatus(t,a.status,a.statusText),send(t,JSON.stringify(a.body,null,2));const u=a.body,c=new URL(u.url);u.url=withoutBase(c.pathname,useRuntimeConfig(t).app.baseURL)+c.search+c.hash,u.message||="Server Error",u.data||=e.data,u.statusMessage||=e.statusMessage,delete a.headers["content-type"],delete a.headers["content-security-policy"],setResponseHeaders(t,a.headers);const l=getRequestHeaders(t),D=t.path.startsWith("/__nuxt_error")||!!l["x-nuxt-error"]?null:await useNitroApp().localFetch(withQuery(joinURL(useRuntimeConfig(t).app.baseURL,"/__nuxt_error"),u),{headers:{...l,"x-nuxt-error":"true"},redirect:"manual"}).catch((()=>null));if(t.handled)return;if(!D){const{template:e}=await import("./error-500.mjs");return setResponseHeader(t,"Content-Type","text/html;charset=UTF-8"),send(t,e(u))}const d=await D.text();for(const[e,s]of D.headers.entries())setResponseHeader(t,e,s);return setResponseStatus(t,D.status&&200!==D.status?D.status:a.status,D.statusText||a.statusText),send(t,d)},function(e,t){const s=defaultHandler(e,t);return setResponseHeaders(t,s.headers),setResponseStatus(t,s.status,s.statusText),send(t,JSON.stringify(s.body,null,2))}];const et=[function(e){e.hooks.hook("render:html",(e=>{e.head.push('<script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}<\/script>')}))}],tt=/^[A-Za-z]:\//;const rt=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,basename$1=function(e,t){const s=function(e=""){return e?e.replace(/\\/g,"/").replace(tt,(e=>e.toUpperCase())):e}(e).split("/");let a="";for(let e=s.length-1;e>=0;e--){const t=s[e];if(t){a=t;break}}return t&&a.endsWith(t)?a.slice(0,-t.length):a},nt=Object.freeze({left:0,top:0,width:16,height:16}),ot=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),st=Object.freeze({...nt,...ot});Object.freeze({...st,body:"",hidden:!1});const it=Object.keys(nt).concat(["provider"]);function getIcons(e,t,s){const a=Object.create(null),u=Object.create(null),c={prefix:e.prefix,icons:a},l=e.icons,D=e.aliases||Object.create(null);e.lastModified&&(c.lastModified=e.lastModified);const d=function(e,t){const s=e.icons,a=e.aliases||Object.create(null),u=Object.create(null);return(t||Object.keys(s).concat(Object.keys(a))).forEach((function resolve(e){if(s[e])return u[e]=[];if(!(e in u)){u[e]=null;const t=a[e]&&a[e].parent,s=t&&resolve(t);s&&(u[e]=[t].concat(s))}return u[e]})),u}(e,t);let h=!0;for(const e in d)d[e]&&(l[e]?(a[e]={...l[e]},h=!1):(u[e]={...D[e]},c.aliases=u));return it.forEach((t=>{t in e&&(c[t]=e[t])})),h&&!0!==s?null:c}const at={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},ut={silent:{level:-1},fatal:{level:at.fatal},error:{level:at.error},warn:{level:at.warn},log:{level:at.log},info:{level:at.info},success:{level:at.success},fail:{level:at.fail},ready:{level:at.info},start:{level:at.info},box:{level:at.info},debug:{level:at.debug},trace:{level:at.trace},verbose:{level:at.verbose}};function isPlainObject$1(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,s=".",a){if(!isPlainObject$1(t))return _defu(e,{},s);const u=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const a=e[t];null!=a&&(Array.isArray(a)&&Array.isArray(u[t])?u[t]=[...a,...u[t]]:isPlainObject$1(a)&&isPlainObject$1(u[t])?u[t]=_defu(a,u[t],(s?`${s}.`:"")+t.toString()):u[t]=a)}return u}const defu=(...e)=>e.reduce(((e,t)=>_defu(e,t,"")),{});function isLogObj(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)&&(!(!e.message&&!e.args)&&!e.stack);var t}let ct=!1;const lt=[];class Consola{options;_lastLog;_mockFn;constructor(e={}){const t=e.types||ut;this.options=defu({...e,defaults:{...e.defaults},level:_normalizeLogLevel(e.level,t),reporters:[...e.reporters||[]]},{types:ut,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const e in t){const s={type:e,...this.options.defaults,...t[e]};this[e]=this._wrapLogFn(s),this[e].raw=this._wrapLogFn(s,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=_normalizeLogLevel(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new Consola({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){ct=!0}resumeLogs(){ct=!1;const e=lt.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(const e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(!ct)return this._logFn(e,s,t);lt.push([this,e,s,t])}}_logFn(e,t,s){if((e.level||0)>this.level)return!1;const a={date:new Date,args:[],...e,level:_normalizeLogLevel(e.level,this.options.types)};!s&&1===t.length&&isLogObj(t[0])?Object.assign(a,t[0]):a.args=[...t],a.message&&(a.args.unshift(a.message),delete a.message),a.additional&&(Array.isArray(a.additional)||(a.additional=a.additional.split("\n")),a.args.push("\n"+a.additional.join("\n")),delete a.additional),a.type="string"==typeof a.type?a.type.toLowerCase():"log",a.tag="string"==typeof a.tag?a.tag:"";const resolveLog=(e=!1)=>{const t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){const e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=a,this._log(a))};clearTimeout(this._lastLog.timeout);const u=this._lastLog.time&&a.date?a.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=a.date,u<this.options.throttle)try{const e=JSON.stringify([a.type,a.tag,a.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(resolveLog,this.options.throttle))}catch{}resolveLog(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function _normalizeLogLevel(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}function parseStack(t,s){const a=e.cwd()+f,u=t.split("\n").splice(s.split("\n").length).map((e=>e.trim().replace("file://","").replace(a,"")));return u}Consola.prototype.add=Consola.prototype.addReporter,Consola.prototype.remove=Consola.prototype.removeReporter,Consola.prototype.clear=Consola.prototype.removeReporter,Consola.prototype.withScope=Consola.prototype.withTag,Consola.prototype.mock=Consola.prototype.mockTypes,Consola.prototype.pause=Consola.prototype.pauseLogs,Consola.prototype.resume=Consola.prototype.resumeLogs;const bracket=e=>e?`[${e}]`:"";class BasicReporter{formatStack(e,t,s){const a="  ".repeat((s?.errorLevel||0)+1);return a+parseStack(e,t).join(`\n${a}`)}formatError(e,t){const s=e.message??l(t,e),a=e.stack?this.formatStack(e.stack,s,t):"",u=t?.errorLevel||0;return(u>0?`${"  ".repeat(u)}[cause]: `:"")+s+"\n"+a+(e.cause?"\n\n"+this.formatError(e.cause,{...t,errorLevel:u+1}):"")}formatArgs(e,t){const s=e.map((e=>e&&"string"==typeof e.stack?this.formatError(e,t):e));return l(t,...s)}formatDate(e,t){return t.date?e.toLocaleTimeString():""}filterAndJoin(e){return e.filter(Boolean).join(" ")}formatLogObj(e,t){const s=this.formatArgs(e.args,t);return"box"===e.type?"\n"+[bracket(e.tag),e.title&&e.title,...s.split("\n")].filter(Boolean).map((e=>" > "+e)).join("\n")+"\n":this.filterAndJoin([bracket(e.type),bracket(e.tag),s])}log(t,s){const a=this.formatLogObj(t,{columns:s.options.stdout.columns||0,...s.options.formatOptions});return u=a+"\n",((c=t.level<2?s.options.stderr||e.stderr:s.options.stdout||e.stdout).__write||c.write).call(c,u);var u,c}}const{env:Dt={},argv:dt=[],platform:ht=""}=void 0===e?{}:e,ft="NO_COLOR"in Dt||dt.includes("--no-color"),pt="FORCE_COLOR"in Dt||dt.includes("--color"),gt="win32"===ht,mt="dumb"===Dt.TERM,Ft=m&&m.isatty&&m.isatty(1)&&Dt.TERM&&!mt,yt=!ft&&(pt||gt&&!mt||Ft||"CI"in Dt&&("GITHUB_ACTIONS"in Dt||"GITLAB_CI"in Dt||"CIRCLECI"in Dt));function replaceClose(e,t,s,a,u=t.slice(0,Math.max(0,e))+a,c=t.slice(Math.max(0,e+s.length)),l=c.indexOf(s)){return u+(l<0?c:replaceClose(l,c,s,a))}function clearBleed(e,t,s,a,u){return e<0?s+t+a:s+replaceClose(e,t,a,u)+a}function init(e,t,s){return function(e,t,s=e,a=e.length+1){return u=>u||""!==u&&void 0!==u?clearBleed((""+u).indexOf(t,a),u,e,t,s):""}(`[${e}m`,`[${t}m`,s)}const Et={reset:init(0,0),bold:init(1,22,"[22m[1m"),dim:init(2,22,"[22m[2m"),italic:init(3,23),underline:init(4,24),inverse:init(7,27),hidden:init(8,28),strikethrough:init(9,29),black:init(30,39),red:init(31,39),green:init(32,39),yellow:init(33,39),blue:init(34,39),magenta:init(35,39),cyan:init(36,39),white:init(37,39),gray:init(90,39),bgBlack:init(40,49),bgRed:init(41,49),bgGreen:init(42,49),bgYellow:init(43,49),bgBlue:init(44,49),bgMagenta:init(45,49),bgCyan:init(46,49),bgWhite:init(47,49),blackBright:init(90,39),redBright:init(91,39),greenBright:init(92,39),yellowBright:init(93,39),blueBright:init(94,39),magentaBright:init(95,39),cyanBright:init(96,39),whiteBright:init(97,39),bgBlackBright:init(100,49),bgRedBright:init(101,49),bgGreenBright:init(102,49),bgYellowBright:init(103,49),bgBlueBright:init(104,49),bgMagentaBright:init(105,49),bgCyanBright:init(106,49),bgWhiteBright:init(107,49)};const Ct=function(e=yt){return e?Et:Object.fromEntries(Object.keys(Et).map((e=>[e,String])))}();const wt=[String.raw`[\u001B\u009B][[\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\d\/#&.:=?%@~_]+)*|[a-zA-Z\d]+(?:;[-a-zA-Z\d\/#&.:=?%@~_]*)*)?\u0007)`,String.raw`(?:(?:\d{1,4}(?:;\d{0,4})*)?[\dA-PR-TZcf-nq-uy=><~]))`].join("|");function stripAnsi$1(e){return e.replace(new RegExp(wt,"g"),"")}const bt={solid:{tl:"",tr:"",bl:"",br:"",h:"",v:""},double:{tl:"",tr:"",bl:"",br:"",h:"",v:""},doubleSingle:{tl:"",tr:"",bl:"",br:"",h:"",v:""},doubleSingleRounded:{tl:"",tr:"",bl:"",br:"",h:"",v:""},singleThick:{tl:"",tr:"",bl:"",br:"",h:"",v:""},singleDouble:{tl:"",tr:"",bl:"",br:"",h:"",v:""},singleDoubleRounded:{tl:"",tr:"",bl:"",br:"",h:"",v:""},rounded:{tl:"",tr:"",bl:"",br:"",h:"",v:""}},vt={borderColor:"white",borderStyle:"rounded",valign:"center",padding:2,marginLeft:1,marginTop:1,marginBottom:1};function box(e,t={}){const s={...t,style:{...vt,...t.style}},a=e.split("\n"),u=[],c=function(e,t="reset"){return Ct[e]||Ct[t]}(s.style.borderColor),l={..."string"==typeof s.style.borderStyle?bt[s.style.borderStyle]||bt.solid:s.style.borderStyle};if(c)for(const e in l)l[e]=c(l[e]);const D=s.style.padding%2==0?s.style.padding:s.style.padding+1,d=a.length+D,h=Math.max(...a.map((e=>stripAnsi$1(e).length)),s.title?stripAnsi$1(s.title).length:0)+D,f=h+D,g=s.style.marginLeft>0?" ".repeat(s.style.marginLeft):"";if(s.style.marginTop>0&&u.push("".repeat(s.style.marginTop)),s.title){const e=c?c(s.title):s.title,t=l.h.repeat(Math.floor((h-stripAnsi$1(s.title).length)/2)),a=l.h.repeat(h-stripAnsi$1(s.title).length-stripAnsi$1(t).length+D);u.push(`${g}${l.tl}${t}${e}${a}${l.tr}`)}else u.push(`${g}${l.tl}${l.h.repeat(f)}${l.tr}`);const m="center"===s.style.valign?Math.floor((d-a.length)/2):"top"===s.style.valign?d-a.length-D:d-a.length;for(let e=0;e<d;e++)if(e<m||e>=m+a.length)u.push(`${g}${l.v}${" ".repeat(f)}${l.v}`);else{const t=a[e-m],s=" ".repeat(D),c=" ".repeat(h-stripAnsi$1(t).length);u.push(`${g}${l.v}${s}${t}${c}${l.v}`)}return u.push(`${g}${l.bl}${l.h.repeat(f)}${l.br}`),s.style.marginBottom>0&&u.push("".repeat(s.style.marginBottom)),u.join("\n")}const _t=Object.create(null),i=e=>globalThis.process?.env||globalThis._importMeta_.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?_t:globalThis),At=new Proxy(_t,{get:(e,t)=>i()[t]??_t[t],has:(e,t)=>t in i()||t in _t,set:(e,t,s)=>(i(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;return delete i(!0)[t],!0},ownKeys(){const e=i(!0);return Object.keys(e)}}),Bt=typeof e<"u"&&e.env?"production":"",Rt=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["CODESANDBOX","CODESANDBOX_HOST",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"],["DENO-DEPLOY","DENO_DEPLOYMENT_ID"],["FIREBASE_APP_HOSTING","FIREBASE_APP_HOSTING",{ci:!0}]];const St=function(){if(globalThis.process?.env)for(const e of Rt){const t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return"/bin/jsh"===globalThis.process?.env?.SHELL&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function n(e){return!!e&&"false"!==e}St.name;const It=globalThis.process?.platform||"",xt=n(At.CI)||!1!==St.ci,Tt=n(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY),$t=n(At.DEBUG),Ot="test"===Bt||n(At.TEST);n(At.MINIMAL);const kt=/^win/i.test(It);!n(At.NO_COLOR)&&(n(At.FORCE_COLOR)||(Tt||kt)&&At.TERM);const jt=(globalThis.process?.versions?.node||"").replace(/^v/,"")||null;Number(jt?.split(".")[0]);const Pt=globalThis.process||Object.create(null),Lt={versions:{}};new Proxy(Pt,{get:(e,t)=>"env"===t?At:t in e?e[t]:t in Lt?Lt[t]:void 0});const Ht="node"===globalThis.process?.release?.name,Nt=!!globalThis.Bun||!!globalThis.process?.versions?.bun,Mt=!!globalThis.Deno,Ut=!!globalThis.fastly,zt=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],["Cloudflare-Workers"===globalThis.navigator?.userAgent,"workerd"],[Ut,"fastly"],[Mt,"deno"],[Nt,"bun"],[Ht,"node"]];!function(){const e=zt.find((e=>e[0]));if(e)e[1]}();const qt=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();function eastAsianWidth(e,{ambiguousAsWide:t=!1}={}){return function(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}(e),12288===(s=e)||s>=65281&&s<=65376||s>=65504&&s<=65510||function(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9776&&e<=9783||e>=9800&&e<=9811||9855===e||e>=9866&&e<=9871||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||94192===e||94193===e||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)||t&&function(e){return 161===e||164===e||167===e||168===e||170===e||173===e||174===e||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||198===e||208===e||215===e||216===e||e>=222&&e<=225||230===e||e>=232&&e<=234||236===e||237===e||240===e||242===e||243===e||e>=247&&e<=250||252===e||254===e||257===e||273===e||275===e||283===e||294===e||295===e||299===e||e>=305&&e<=307||312===e||e>=319&&e<=322||324===e||e>=328&&e<=331||333===e||338===e||339===e||358===e||359===e||363===e||462===e||464===e||466===e||468===e||470===e||472===e||474===e||476===e||593===e||609===e||708===e||711===e||e>=713&&e<=715||717===e||720===e||e>=728&&e<=731||733===e||735===e||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||1025===e||e>=1040&&e<=1103||1105===e||8208===e||e>=8211&&e<=8214||8216===e||8217===e||8220===e||8221===e||e>=8224&&e<=8226||e>=8228&&e<=8231||8240===e||8242===e||8243===e||8245===e||8251===e||8254===e||8308===e||8319===e||e>=8321&&e<=8324||8364===e||8451===e||8453===e||8457===e||8467===e||8470===e||8481===e||8482===e||8486===e||8491===e||8531===e||8532===e||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||8585===e||e>=8592&&e<=8601||8632===e||8633===e||8658===e||8660===e||8679===e||8704===e||8706===e||8707===e||8711===e||8712===e||8715===e||8719===e||8721===e||8725===e||8730===e||e>=8733&&e<=8736||8739===e||8741===e||e>=8743&&e<=8748||8750===e||e>=8756&&e<=8759||8764===e||8765===e||8776===e||8780===e||8786===e||8800===e||8801===e||e>=8804&&e<=8807||8810===e||8811===e||8814===e||8815===e||8834===e||8835===e||8838===e||8839===e||8853===e||8857===e||8869===e||8895===e||8978===e||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||9632===e||9633===e||e>=9635&&e<=9641||9650===e||9651===e||9654===e||9655===e||9660===e||9661===e||9664===e||9665===e||e>=9670&&e<=9672||9675===e||e>=9678&&e<=9681||e>=9698&&e<=9701||9711===e||9733===e||9734===e||9737===e||9742===e||9743===e||9756===e||9758===e||9792===e||9794===e||9824===e||9825===e||e>=9827&&e<=9829||e>=9831&&e<=9834||9836===e||9837===e||9839===e||9886===e||9887===e||9919===e||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||9955===e||9960===e||9961===e||e>=9963&&e<=9969||9972===e||e>=9974&&e<=9977||9979===e||9980===e||9982===e||9983===e||10045===e||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||65533===e||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||127375===e||127376===e||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}(e)?2:1;var s}const Wt=globalThis.Intl?.Segmenter?new Intl.Segmenter:{segment:e=>e.split("")},Vt=/^\p{Default_Ignorable_Code_Point}$/u;function stringWidth$1(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:s=!0,countAnsiEscapeCodes:a=!1}=t;if(a||(e=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(qt,"")}(e)),0===e.length)return 0;let u=0;const c={ambiguousAsWide:!s};for(const{segment:t}of Wt.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||Vt.test(t)||(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g.test(t)?u+=2:u+=eastAsianWidth(e,c)))}return u}const Kt={info:"cyan",fail:"red",success:"green",ready:"green",start:"magenta"},Gt={0:"red",1:"yellow"},Xt=function(){const{env:e}=g,{TERM:t,TERM_PROGRAM:s}=e;return"win32"!==g.platform?"linux"!==t:Boolean(e.WT_SESSION)||Boolean(e.TERMINUS_SUBLIME)||"{cmd::Cmder}"===e.ConEmuTask||"Terminus-Sublime"===s||"vscode"===s||"xterm-256color"===t||"alacritty"===t||"rxvt-unicode"===t||"rxvt-unicode-256color"===t||"JetBrains-JediTerm"===e.TERMINAL_EMULATOR}(),s$1=(e,t)=>Xt?e:t,Jt={error:s$1("",""),fatal:s$1("",""),ready:s$1("",""),warn:s$1("",""),info:s$1("","i"),success:s$1("",""),debug:s$1("","D"),trace:s$1("",""),fail:s$1("",""),start:s$1("","o"),log:""};function stringWidth(e){return"object"==typeof Intl&&Intl.Segmenter?stringWidth$1(e):stripAnsi$1(e).length}class FancyReporter extends BasicReporter{formatStack(e,t,s){const a="  ".repeat((s?.errorLevel||0)+1);return`\n${a}`+parseStack(e,t).map((e=>"  "+e.replace(/^at +/,(e=>Ct.gray(e))).replace(/\((.+)\)/,((e,t)=>`(${Ct.cyan(t)})`)))).join(`\n${a}`)}formatType(e,t,s){const a=Kt[e.type]||Gt[e.level]||"gray";if(t)return function(e="bgWhite"){return Ct[`bg${e[0].toUpperCase()}${e.slice(1)}`]||Ct.bgWhite}(a)(Ct.black(` ${e.type.toUpperCase()} `));const u="string"==typeof Jt[e.type]?Jt[e.type]:e.icon||e.type;return u?function(e="white"){return Ct[e]||Ct.white}(a)(u):""}formatLogObj(e,t){const[s,...a]=this.formatArgs(e.args,t).split("\n");if("box"===e.type)return box(characterFormat(s+(a.length>0?"\n"+a.join("\n"):"")),{title:e.title?characterFormat(e.title):void 0,style:e.style});const u=this.formatDate(e.date,t),c=u&&Ct.gray(u),l=e.badge??e.level<2,D=this.formatType(e,l,t),d=e.tag?Ct.gray(e.tag):"";let h;const f=this.filterAndJoin([D,characterFormat(s)]),g=this.filterAndJoin(t.columns?[d,c]:[d]),m=(t.columns||0)-stringWidth(f)-stringWidth(g)-2;if(h=m>0&&(t.columns||0)>=80?f+" ".repeat(m)+g:(g?`${Ct.gray(`[${g}]`)} `:"")+f,h+=characterFormat(a.length>0?"\n"+a.join("\n"):""),"trace"===e.type){const t=new Error("Trace: "+e.message);h+=this.formatStack(t.stack||"",t.message)}return l?"\n"+h+"\n":h}}function characterFormat(e){return e.replace(/`([^`]+)`/gm,((e,t)=>Ct.cyan(t))).replace(/\s+_([^_]+)_\s+/gm,((e,t)=>` ${Ct.underline(t)} `))}const Qt=function(t={}){let s=function(){if($t)return at.debug;if(Ot)return at.warn;return at.info}();e.env.CONSOLA_LEVEL&&(s=Number.parseInt(e.env.CONSOLA_LEVEL)??s);const a=function(e={}){return new Consola(e)}({level:s,defaults:{level:s},stdout:e.stdout,stderr:e.stderr,prompt:(...e)=>import("./prompt.mjs").then((t=>t.prompt(...e))),reporters:t.reporters||[t.fancy??(!xt&&!Ot)?new FancyReporter:new BasicReporter],...t});return a}();function defineRenderHandler(e){const t=useRuntimeConfig();return le((async s=>{const a=useNitroApp(),u={event:s,render:e,response:void 0};if(await a.hooks.callHook("render:before",u),!u.response){if(s.path===`${t.app.baseURL}favicon.ico`)return setResponseHeader(s,"Content-Type","image/x-icon"),send(s,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");if(u.response=await u.render(s),!u.response){const e=getResponseStatus(s);return setResponseStatus(s,200===e?500:e),send(s,"No response returned from render handler: "+s.path)}}return await a.hooks.callHook("render:response",u.response,u),u.response.headers&&setResponseHeaders(s,u.response.headers),(u.response.statusCode||u.response.statusMessage)&&setResponseStatus(s,u.response.statusCode,u.response.statusMessage),u.response.body}))}function baseURL(){return useRuntimeConfig().app.baseURL}function buildAssetsURL(...e){return joinRelativeURL(publicAssetsURL(),useRuntimeConfig().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=useRuntimeConfig().app,s=t.cdnURL||t.baseURL;return e.length?joinRelativeURL(s,...e):s}const Yt={heroicons:()=>import("./icons.mjs").then((e=>e.default))},Zt=defineCachedEventHandler((async e=>{const t=getRequestURL(e);if(!t)return createError$1({status:400,message:"Invalid icon request"});const s=Ve.icon,a=e.context.params?.collection?.replace(/\.json$/,""),u=a?await(Yt[a]?.()):null,c=s.iconifyApiEndpoint||"https://api.iconify.design",l=t.searchParams.get("icons")?.split(",");if(u&&l?.length){const e=getIcons(u,l);return Qt.debug(`[Icon] serving ${(l||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from bundled collection`),e}if(!0===s.fallbackToApi||"server-only"===s.fallbackToApi){const e=new URL("./"+basename$1(t.pathname)+t.search,c);if(Qt.debug(`[Icon] fetching ${(l||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from iconify api`),e.host!==new URL(c).host)return createError$1({status:400,message:"Invalid icon request"});try{return await $fetch(e.href)}catch(e){return Qt.error(e),404===e.status?createError$1({status:404}):createError$1({status:500,message:"Failed to fetch fallback icon"})}}return createError$1({status:404})}),{group:"nuxt",name:"icon",getKey(e){const t=e.context.params?.collection?.replace(/\.json$/,"")||"unknown",s=String(getQuery(e).icons||"");return`${t}_${s.split(",")[0]}_${s.length}_${hash$1(s)}`},swr:!0,maxAge:604800}),er=defineEventHandler((()=>{})),tr=new TextDecoder,toUTF8String=(e,t=0,s=e.length)=>tr.decode(e.slice(t,s)),toHexString=(e,t=0,s=e.length)=>e.slice(t,s).reduce(((e,t)=>e+("0"+t.toString(16)).slice(-2)),""),readInt16LE=(e,t=0)=>{const s=e[t]+256*e[t+1];return s|131070*(32768&s)},readUInt16BE=(e,t=0)=>256*e[t]+e[t+1],readUInt16LE=(e,t=0)=>e[t]+256*e[t+1],readUInt24LE=(e,t=0)=>e[t]+256*e[t+1]+65536*e[t+2],readInt32LE=(e,t=0)=>e[t]+256*e[t+1]+65536*e[t+2]+(e[t+3]<<24),readUInt32BE=(e,t=0)=>e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3],readUInt32LE=(e,t=0)=>e[t]+256*e[t+1]+65536*e[t+2]+e[t+3]*2**24,rr={readUInt16BE:readUInt16BE,readUInt16LE:readUInt16LE,readUInt32BE:readUInt32BE,readUInt32LE:readUInt32LE};function readUInt(e,t,s,a){s=s||0;return rr["readUInt"+t+(a?"BE":"LE")](e,s)}const nr={validate:e=>"BM"===toUTF8String(e,0,2),calculate:e=>({height:Math.abs(readInt32LE(e,22)),width:readUInt32LE(e,18)})};function getSizeFromOffset(e,t){const s=e[t];return 0===s?256:s}function getImageSize$1(e,t){const s=6+16*t;return{height:getSizeFromOffset(e,s+1),width:getSizeFromOffset(e,s)}}const or={validate(e){const t=readUInt16LE(e,0),s=readUInt16LE(e,4);if(0!==t||0===s)return!1;return 1===readUInt16LE(e,2)},calculate(e){const t=readUInt16LE(e,4),s=getImageSize$1(e,0);if(1===t)return s;const a=[s];for(let s=1;s<t;s+=1)a.push(getImageSize$1(e,s));return{height:s.height,images:a,width:s.width}}},sr={validate(e){const t=readUInt16LE(e,0),s=readUInt16LE(e,4);if(0!==t||0===s)return!1;return 2===readUInt16LE(e,2)},calculate:e=>or.calculate(e)},ir={validate:e=>542327876===readUInt32LE(e,0),calculate:e=>({height:readUInt32LE(e,12),width:readUInt32LE(e,16)})},ar=/^GIF8[79]a/,ur={validate:e=>ar.test(toUTF8String(e,0,6)),calculate:e=>({height:readUInt16LE(e,8),width:readUInt16LE(e,6)})},cr={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function readImageHeader(e,t){const s=t+4;return[toUTF8String(e,t,s),readUInt32BE(e,s)]}function getImageSize(e){const t=cr[e];return{width:t,height:t,type:e}}const lr={validate:e=>"icns"===toUTF8String(e,0,4),calculate(e){const t=e.length,s=readUInt32BE(e,4);let a=8,u=readImageHeader(e,a),c=getImageSize(u[0]);if(a+=u[1],a===s)return c;const l={height:c.height,images:[c],width:c.width};for(;a<s&&a<t;)u=readImageHeader(e,a),c=getImageSize(u[0]),a+=u[1],l.images.push(c);return l}},Dr={validate:e=>"ff4fff51"===toHexString(e,0,4),calculate:e=>({height:readUInt32BE(e,12),width:readUInt32BE(e,8)})},dr="66747970",hr="6a703268",fr="6a502020",pr="72726571",parseIHDR=e=>({height:readUInt32BE(e,4),width:readUInt32BE(e,8)}),gr={validate(e){const t=toHexString(e,4,8),s=readUInt32BE(e,0);if(t!==fr||s<1)return!1;const a=s+4,u=readUInt32BE(e,s),c=e.slice(a,a+u);return toHexString(c,0,4)===dr},calculate(e){const t=readUInt32BE(e,0);let s=t+4+readUInt16BE(e,t+2);switch(toHexString(e,s,s+4)){case pr:return s=s+4+4+(e=>{const t=e[0];let s=1+2*t;return s=s+2+readUInt16BE(e,s)*(2+t),s+2+readUInt16BE(e,s)*(16+t)})(e.slice(s+4)),parseIHDR(e.slice(s+8,s+24));case hr:return parseIHDR(e.slice(s+8,s+24));default:throw new TypeError("Unsupported header found: "+toUTF8String(e,s,s+4))}}};function isEXIF(e){return"45786966"===toHexString(e,2,6)}function extractSize(e,t){return{height:readUInt16BE(e,t),width:readUInt16BE(e,t+2)}}function validateExifBlock(e,t){const s=e.slice(2,t),a=toHexString(s,6,8),u="4d4d"===a;if(u||"4949"===a)return function(e,t){const s=readUInt(e,16,14,t);for(let a=0;a<s;a++){const s=16+12*a,u=s+12;if(s>e.length)return;const c=e.slice(s,u);if(274===readUInt(c,16,0,t)){if(3!==readUInt(c,16,2,t))return;if(1!==readUInt(c,32,4,t))return;return readUInt(c,16,8,t)}}}(s,u)}function validateInput(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e[t])throw new TypeError("Invalid JPG, marker table corrupted")}const mr={validate:e=>"ffd8"===toHexString(e,0,2),calculate(e){let t,s;for(e=e.slice(4);e.length>0;){const a=readUInt16BE(e,0);if(isEXIF(e)&&(t=validateExifBlock(e,a)),validateInput(e,a),s=e[a+1],192===s||193===s||194===s){const s=extractSize(e,a+5);return t?{height:s.height,orientation:t,width:s.width}:s}e=e.slice(a+2)}throw new TypeError("Invalid JPG, no size found")}},Fr={validate:e=>"KTX 11"===toUTF8String(e,1,7),calculate:e=>({height:readUInt32LE(e,40),width:readUInt32LE(e,36)})},yr="CgBI",Er={validate(e){if("PNG\r\n\n"===toUTF8String(e,1,8)){let t=toUTF8String(e,12,16);if(t===yr&&(t=toUTF8String(e,28,32)),"IHDR"!==t)throw new TypeError("Invalid PNG");return!0}return!1},calculate:e=>toUTF8String(e,12,16)===yr?{height:readUInt32BE(e,36),width:readUInt32BE(e,32)}:{height:readUInt32BE(e,20),width:readUInt32BE(e,16)}},Cr={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},wr={default:e=>{let t=[];for(;e.length>0;){const s=e.shift();if("#"!==s[0]){t=s.split(" ");break}}if(2===t.length)return{height:Number.parseInt(t[1],10),width:Number.parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const s=e.shift();if(s.length>16||(s.codePointAt(0)||0)>128)continue;const[a,u]=s.split(" ");if(a&&u&&(t[a.toLowerCase()]=Number.parseInt(u,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},br={validate:e=>toUTF8String(e,0,2)in Cr,calculate(e){const t=toUTF8String(e,0,2),s=Cr[t],a=toUTF8String(e,3).split(/[\n\r]+/);return(wr[s]||wr.default)(a)}},vr={validate:e=>"8BPS"===toUTF8String(e,0,4),calculate:e=>({height:readUInt32BE(e,14),width:readUInt32BE(e,18)})},_r=/<svg\s([^"'>]|"[^"]*"|'[^']*')*>/,Ar={height:/\sheight=(["'])([^%]+?)\1/,root:_r,viewbox:/\sviewbox=(["'])(.+?)\1/i,width:/\swidth=(["'])([^%]+?)\1/},Br=2.54,Rr={in:96,cm:96/Br,em:16,ex:8,m:96/Br*100,mm:96/Br/10,pc:96/72/12,pt:96/72,px:1},Sr=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(Rr).join("|")})?$`);function parseLength(e){const t=Sr.exec(e);if(t)return Math.round(Number(t[1])*(Rr[t[2]]||1))}function parseViewbox(e){const t=e.split(" ");return{height:parseLength(t[3]),width:parseLength(t[2])}}const Ir={validate:e=>_r.test(toUTF8String(e,0,1e3)),calculate(e){const t=toUTF8String(e).match(Ar.root);if(t){const e=function(e){const t=e.match(Ar.width),s=e.match(Ar.height),a=e.match(Ar.viewbox);return{height:s&&parseLength(s[2]),viewbox:a&&parseViewbox(a[2]),width:t&&parseLength(t[2])}}(t[0]);if(e.width&&e.height)return function(e){return{height:e.height,width:e.width}}(e);if(e.viewbox)return function(e,t){const s=t.width/t.height;return e.width?{height:Math.floor(e.width/s),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*s)}:{height:t.height,width:t.width}}(e,e.viewbox)}throw new TypeError("Invalid SVG")}},xr={validate:e=>0===readUInt16LE(e,0)&&0===readUInt16LE(e,4),calculate:e=>({height:readUInt16LE(e,14),width:readUInt16LE(e,12)})};function readValue(e,t){const s=readUInt(e,16,8,t);return(readUInt(e,16,10,t)<<16)+s}function nextTag(e){if(e.length>24)return e.slice(12)}const Tr=new Set(["49492a00","4d4d002a"]),$r={validate:e=>Tr.has(toHexString(e,0,4)),calculate(e){const t="BE"===function(e){const t=toUTF8String(e,0,2);return"II"===t?"LE":"MM"===t?"BE":void 0}(e),s=function(e,t){const s=readUInt(e,32,4,t);let a=1024;const u=e.length;return s+a>u&&(a=u-s-10),e.slice(s+2,s+2+a)}(e,t),a=function(e,t){const s={};let a=e;for(;a&&a.length>0;){const e=readUInt(a,16,0,t),u=readUInt(a,16,2,t),c=readUInt(a,32,4,t);if(0===e)break;1!==c||3!==u&&4!==u||(s[e]=readValue(a,t)),a=nextTag(a)}return s}(s,t),u=a[256],c=a[257];if(!u||!c)throw new TypeError("Invalid Tiff. Missing tags");return{height:c,width:u}}};function findBox(e,t,s=0,a=e.length){for(let u=s;u<a;){const s=readUInt32BE(e,u);if(toUTF8String(e,u+4,u+8)===t)return{offset:u,size:s};if(s<=0||u+s>a)break;u+=s}throw new Error(`${t} box not found`)}const Or={bmp:nr,cur:sr,dds:ir,gif:ur,icns:lr,ico:or,j2c:Dr,jp2:gr,jpg:mr,ktx:Fr,png:Er,pnm:br,psd:vr,svg:Ir,tga:xr,tiff:$r,webp:{validate(e){const t="RIFF"===toUTF8String(e,0,4),s="WEBP"===toUTF8String(e,8,12),a="VP8"===toUTF8String(e,12,15);return t&&s&&a},calculate(e){const t=toUTF8String(e,12,16);if(e=e.slice(20,30),"VP8X"===t){const t=e[0];if(!(192&t)&&!(1&t))return function(e){return{height:1+readUInt24LE(e,7),width:1+readUInt24LE(e,4)}}(e);throw new TypeError("Invalid WebP")}if("VP8 "===t&&47!==e[0])return function(e){return{height:16383&readInt16LE(e,8),width:16383&readInt16LE(e,6)}}(e);const s=toHexString(e,3,6);if("VP8L"===t&&"9d012a"!==s)return function(e){return{height:1+((15&e[4])<<10|e[3]<<2|(192&e[2])>>6),width:1+((63&e[2])<<8|e[1])}}(e);throw new TypeError("Invalid WebP")}},avif:{validate:e=>"avif"===toUTF8String(e,8,12),calculate:e=>{const t=findBox(e,"meta"),s=findBox(e,"iprp",t.offset+12,t.offset+t.size),a=findBox(e,"ipco",s.offset+8,s.offset+s.size),u=findBox(e,"ispe",a.offset+8,a.offset+a.size);return{width:readUInt32BE(e,u.offset+12),height:readUInt32BE(e,u.offset+16)}}}},kr=Object.keys(Or),jr={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function imageMeta(e){if(!(e instanceof Uint8Array))throw new TypeError("Input should be a Uint8Array");const t=function(e){const t=e[0];if(t in jr){const s=jr[t];if(s&&Or[s].validate(e))return s}return kr.find((t=>Or[t].validate(e)))}(e);if(void 0!==t&&t in Or){const s=Or[t].calculate(e);if(void 0!==s)return s.type=t,s}throw new TypeError(`Unsupported file type: ${t}`)}var Pr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}var Lr={exports:{}};function Negotiator(e){if(!new.target)return new Negotiator(e);const{supportedValues:t=[],cache:s}=e&&"object"==typeof e&&e||{};this.supportedValues=t,this.cache=s}function negotiate(e,t){if(!e||!Array.isArray(t)||0===t.length)return null;if("*"===e)return t[0];let s=null,a=1/0,u=0;return function(e,t){let s,a="",u=Hr;for(let c=0,l=e.length;c<l;++c){const l=e[c];if(" "!==l&&"\t"!==l)if(";"!==l){if(","!==l){if(u===Mr){if("q"===l||"="===l)continue;if("."===l||"1"===l||"0"===l||"2"===l||"3"===l||"4"===l||"5"===l||"6"===l||"7"===l||"8"===l||"9"===l){s+=l;continue}}else if(u===Hr){u=Nr,a+=l;continue}if(u!==Nr){if(t(a,parseFloat(s)||0)){u=Ur;break}u=Hr,a=l,s=""}else{const t=e[c-1];" "!==t&&"\t"!==t||(a=""),a+=l}}else if(u===Nr){if(t(a,1)){u=Ur;break}u=Hr,a=""}else if(u===Mr){if(t(a,parseFloat(s)||0)){u=Ur;break}u=Hr,a="",s=""}}else u===Nr&&(u=Mr,s="")}u===Nr?t(a,1):u===Mr&&t(a,parseFloat(s)||0)}(e,(function(e,c){if(0===c||u>c)return!1;const l="*"===e&&t[0]||e,D=t.indexOf(l);return-1!==D&&(0===D&&1===c?(s=l,!0):((u<c||a>D)&&(s=l,a=D,u=c),!1))})),s}Negotiator.prototype.negotiate=function(e){return"string"!=typeof e?null:this.cache?(this.cache.has(e)||this.cache.set(e,negotiate(e,this.supportedValues)),this.cache.get(e)):negotiate(e,this.supportedValues)};const Hr=0,Nr=1,Mr=2,Ur=3;Lr.exports=negotiate,Lr.exports.default=negotiate;var zr=Lr.exports.negotiate=negotiate;Lr.exports.Negotiator=Negotiator;const qr=getDefaultExportFromNamespaceIfNotNamed(y),Wr=getDefaultExportFromNamespaceIfNotNamed(E);var etag_1=function(e,t){if(null==e)throw new TypeError("argument entity is required");var s=function(e){if("function"==typeof Kr&&e instanceof Kr)return!0;return e&&"object"==typeof e&&"ctime"in e&&"[object Date]"===Gr.call(e.ctime)&&"mtime"in e&&"[object Date]"===Gr.call(e.mtime)&&"ino"in e&&"number"==typeof e.ino&&"size"in e&&"number"==typeof e.size}(e),a=t&&"boolean"==typeof t.weak?t.weak:s;if(!s&&"string"!=typeof e&&!Buffer.isBuffer(e))throw new TypeError("argument entity must be string, Buffer, or fs.Stats");var u=s?(c=e,l=c.mtime.getTime().toString(16),'"'+c.size.toString(16)+"-"+l+'"'):function(e){if(0===e.length)return'"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk"';var t=Vr.createHash("sha1").update(e,"utf8").digest("base64").substring(0,27),s="string"==typeof e?Buffer.byteLength(e,"utf8"):e.length;return'"'+s.toString(16)+"-"+t+'"'}(e);var c,l;return a?"W/"+u:u},Vr=qr,Kr=Wr.Stats,Gr=Object.prototype.toString;const Xr=getDefaultExportFromCjs(etag_1),Jr=/^[A-Za-z]:\//;function normalizeWindowsPath(e=""){return e?e.replace(/\\/g,"/").replace(Jr,(e=>e.toUpperCase())):e}const Qr=/^[/\\]{2}/,Yr=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,Zr=/^[A-Za-z]:$/,join=function(...e){if(0===e.length)return".";let t;for(const s of e)s&&s.length>0&&(void 0===t?t=s:t+=`/${s}`);return void 0===t?".":function(e){if(0===e.length)return".";const t=(e=normalizeWindowsPath(e)).match(Qr),s=isAbsolute(e),a="/"===e[e.length-1];return 0===(e=normalizeString(e,!s)).length?s?"/":a?"./":".":(a&&(e+="/"),Zr.test(e)&&(e+="/"),t?s?`//${e}`:`//./${e}`:s&&!isAbsolute(e)?`/${e}`:e)}(t.replace(/\/\/+/g,"/"))};const resolve=function(...t){let s="",a=!1;for(let u=(t=t.map((e=>normalizeWindowsPath(e)))).length-1;u>=-1&&!a;u--){const c=u>=0?t[u]:void 0!==e&&"function"==typeof e.cwd?e.cwd().replace(/\\/g,"/"):"/";c&&0!==c.length&&(s=`${c}/${s}`,a=isAbsolute(c))}return s=normalizeString(s,!a),a&&!isAbsolute(s)?`/${s}`:s.length>0?s:"."};function normalizeString(e,t){let s="",a=0,u=-1,c=0,l=null;for(let D=0;D<=e.length;++D){if(D<e.length)l=e[D];else{if("/"===l)break;l="/"}if("/"===l){if(u===D-1||1===c);else if(2===c){if(s.length<2||2!==a||"."!==s[s.length-1]||"."!==s[s.length-2]){if(s.length>2){const e=s.lastIndexOf("/");-1===e?(s="",a=0):(s=s.slice(0,e),a=s.length-1-s.lastIndexOf("/")),u=D,c=0;continue}if(s.length>0){s="",a=0,u=D,c=0;continue}}t&&(s+=s.length>0?"/..":"..",a=2)}else s.length>0?s+=`/${e.slice(u+1,D)}`:s=e.slice(u+1,D),a=D-u-1;u=D,c=0}else"."===l&&-1!==c?++c:c=-1}return s}const isAbsolute=function(e){return Yr.test(e)},en=/.(\.[^./]+)$/,dirname=function(e){const t=normalizeWindowsPath(e).replace(/\/$/,"").split("/").slice(0,-1);return 1===t.length&&Zr.test(t[0])&&(t[0]+="/"),t.join("/")||(isAbsolute(e)?"/":".")},parse=function(e){const t=normalizeWindowsPath(e).split("/").shift()||"/",s=function(e,t){const s=normalizeWindowsPath(e).split("/").pop();return t&&s.endsWith(t)?s.slice(0,-t.length):s}(e),a=function(e){const t=en.exec(normalizeWindowsPath(e));return t&&t[1]||""}(s);return{root:t,dir:dirname(e),base:s,ext:a,name:s.slice(0,s.length-a.length)}},tn={__proto__:null,get b(){return $n},get background(){return un},get blur(){return wn},get crop(){return xn},get enlarge(){return cn},get extend(){return pn},get extract(){return gn},get fit(){return nn},get flatten(){return bn},get flip(){return Fn},get flop(){return yn},get gamma(){return vn},get grayscale(){return In},get h(){return kn},get height(){return dn},get kernel(){return ln},get median(){return Cn},get modulate(){return Rn},get negate(){return _n},get normalize(){return An},get pos(){return Pn},get position(){return on},get q(){return Tn},get quality(){return rn},get resize(){return hn},get rotate(){return mn},get s(){return jn},get sharpen(){return En},get threshold(){return Bn},get tint(){return Sn},get trim(){return fn},get w(){return On},get width(){return Dn}};function VArg(e){return destr(e)}function applyHandler(e,t,s,a){const u=s.args?function(e,t){const s=e.split("_");return t.map(((e,t)=>e(s[t])))}(a,s.args):[];return s.apply(e,t,...u)}const rn={args:[VArg],order:-1,apply:(e,t,s)=>{e.quality=s}},nn={args:[VArg],order:-1,apply:(e,t,s)=>{e.fit=s}},on={args:[VArg],order:-1,apply:(e,t,s)=>{e.position=s}},sn=/^([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i,an=/^([\da-f])([\da-f])([\da-f])$/i,un={args:[VArg],order:-1,apply:(e,t,s)=>{(s=String(s)).startsWith("#")||!sn.test(s)&&!an.test(s)||(s="#"+s),e.background=s}},cn={args:[],apply:e=>{e.enlarge=!0}},ln={args:[VArg],apply:(e,t,s)=>{e.kernel=s}},Dn={args:[VArg],apply:(e,t,s)=>t.resize(s,void 0,{withoutEnlargement:!e.enlarge})},dn={args:[VArg],apply:(e,t,s)=>t.resize(void 0,s,{withoutEnlargement:!e.enlarge})},hn={args:[VArg,VArg,VArg],apply:(e,t,s)=>{let[a,u]=String(s).split("x").map(Number);if(a){if(u||(u=a),!e.enlarge){const t=function(e,t){const s=t.width/t.height;let{width:a,height:u}=t;return e.width&&a>e.width&&(a=e.width,u=Math.round(e.width/s)),e.height&&u>e.height&&(u=e.height,a=Math.round(e.height*s)),{width:a,height:u}}(e.meta,{width:a,height:u});a=t.width,u=t.height}return t.resize(a,u,{fit:e.fit,position:e.position,background:e.background,kernel:e.kernel})}}},fn={args:[VArg],apply:(e,t,s)=>t.trim(s)},pn={args:[VArg,VArg,VArg,VArg],apply:(e,t,s,a,u,c)=>t.extend({top:s,left:c,bottom:u,right:a,background:e.background})},gn={args:[VArg,VArg,VArg,VArg],apply:(e,t,s,a,u,c)=>t.extract({left:s,top:a,width:u,height:c})},mn={args:[VArg],apply:(e,t,s)=>t.rotate(s,{background:e.background})},Fn={args:[],apply:(e,t)=>t.flip()},yn={args:[],apply:(e,t)=>t.flop()},En={args:[VArg,VArg,VArg],apply:(e,t,s,a,u)=>t.sharpen(s,a,u)},Cn={args:[VArg,VArg,VArg],apply:(e,t,s)=>t.median(s)},wn={args:[VArg,VArg,VArg],apply:(e,t,s)=>t.blur(s)},bn={args:[VArg,VArg,VArg],apply:(e,t)=>t.flatten({background:e.background})},vn={args:[VArg,VArg,VArg],apply:(e,t,s,a)=>t.gamma(s,a)},_n={args:[VArg,VArg,VArg],apply:(e,t)=>t.negate()},An={args:[VArg,VArg,VArg],apply:(e,t)=>t.normalize()},Bn={args:[VArg],apply:(e,t,s)=>t.threshold(s)},Rn={args:[VArg],apply:(e,t,s,a,u)=>t.modulate({brightness:s,saturation:a,hue:u})},Sn={args:[VArg],apply:(e,t,s)=>t.tint(s)},In={args:[VArg],apply:(e,t)=>t.grayscale()},xn=gn,Tn=rn,$n=un,On=Dn,kn=dn,jn=hn,Pn=on;function getEnv(t){return t in e.env?destr(e.env[t]):void 0}function cachedPromise(e){let t;return(...s)=>t||(t=Promise.resolve(e(...s)),t)}const Ln=new Set(["jpeg","png","webp","avif","tiff","heif","gif","heic"]);const Hn=/[&,]/g,Nn=/[:=_]/;function createIPXH3Handler(e){const _handler=async t=>{const[s="",...a]=t.path.slice(1).split("/"),u=safeString(decode(a.join("/")));if(!s)throw createError$1({statusCode:400,statusText:"IPX_MISSING_MODIFIERS",message:`Modifiers are missing: ${u}`});if(!u||"/"===u)throw createError$1({statusCode:400,statusText:"IPX_MISSING_ID",message:`Resource id is missing: ${t.path}`});const c=Object.create(null);if("_"!==s)for(const e of s.split(Hn)){const[t,...s]=e.split(Nn);c[safeString(t)]=s.map((e=>safeString(decode(e)))).join("_")}if("auto"===(c.f||c.format)){const e=function(e,t){if(t){const t=zr(e,["image/webp","image/gif"]);return t?.split("/")[1]||"gif"}const s=zr(e,["image/avif","image/webp","image/jpeg","image/png","image/tiff","image/heif","image/gif"]);return s?.split("/")[1]||"jpeg"}(getRequestHeader(t,"accept")||"",!(!c.a&&!c.animated));delete c.f,delete c.format,e&&(c.format=e,function(e,t,s){let a=e.node.res.getHeader(t);a?(Array.isArray(a)||(a=[a.toString()]),e.node.res.setHeader(t,[...a,s])):e.node.res.setHeader(t,s)}(t,"vary","Accept"))}const l=e(u,c),D=await l.getSourceMeta();if(sendResponseHeaderIfNotSet(t,"content-security-policy","default-src 'none'"),D.mtime){sendResponseHeaderIfNotSet(t,"last-modified",D.mtime.toUTCString());const e=getRequestHeader(t,"if-modified-since");if(e&&new Date(e)>=D.mtime)return setResponseStatus(t,304),send(t)}const{data:d,format:h}=await l.process();"number"==typeof D.maxAge&&sendResponseHeaderIfNotSet(t,"cache-control",`max-age=${+D.maxAge}, public, s-maxage=${+D.maxAge}`);const f=Xr(d);return sendResponseHeaderIfNotSet(t,"etag",f),f&&getRequestHeader(t,"if-none-match")===f?(setResponseStatus(t,304),send(t)):(h&&sendResponseHeaderIfNotSet(t,"content-type",`image/${h}`),d)};return defineEventHandler((async e=>{try{return await _handler(e)}catch(t){const s=createError$1(t);return setResponseStatus(e,s.statusCode,s.statusMessage),{error:{message:`[${s.statusCode}] [${s.statusMessage||"IPX_ERROR"}] ${s.message}`}}}}))}function sendResponseHeaderIfNotSet(e,t,s){getResponseHeader(e,t)||setResponseHeader(e,t,s)}function safeString(e){return JSON.stringify(e).replace(/^"|"$/g,"").replace(/\\+/g,"\\").replace(/\\"/g,'"')}const Mn=/^https?:\/\//;function ipxHttpStorage(e={}){const t=e.allowAllDomains??getEnv("IPX_HTTP_ALLOW_ALL_DOMAINS")??!1;let s=e.domains||getEnv("IPX_HTTP_DOMAINS")||[];const a=e.maxAge||getEnv("IPX_HTTP_MAX_AGE")||300,u=e.fetchOptions||getEnv("IPX_HTTP_FETCH_OPTIONS")||{};"string"==typeof s&&(s=s.split(",").map((e=>e.trim())));const c=new Set(s.map((e=>(Mn.test(e)||(e="http://"+e),new URL(e).hostname))).filter(Boolean));function validateId(e){const s=new URL(decodeURIComponent(e));if(!s.hostname)throw createError$1({statusCode:403,statusText:"IPX_MISSING_HOSTNAME",message:`Hostname is missing: ${e}`});if(!t&&!c.has(s.hostname))throw createError$1({statusCode:403,statusText:"IPX_FORBIDDEN_HOST",message:`Forbidden host: ${s.hostname}`});return s.toString()}return{name:"ipx:http",async getMeta(t){const s=validateId(t);try{const t=await _e.raw(s,{...u,method:"HEAD"}),{maxAge:c,mtime:l}=function(t){let s,u=a;if(e.ignoreCacheControl){const e=t.headers.get("cache-control");if(e){const t=e.match(/max-age=(\d+)/);t&&t[1]&&(u=Number.parseInt(t[1]))}}const c=t.headers.get("last-modified");return c&&(s=new Date(c)),{maxAge:u,mtime:s}}(t);return{mtime:l,maxAge:c}}catch{return{}}},async getData(e){const t=validateId(e);return await _e(t,{...u,method:"GET",responseType:"arrayBuffer"})}}}function ipxFSStorage(e={}){const t=function(e){if(!e||!Array.isArray(e)){return[resolve(e||getEnv("IPX_FS_DIR")||".")]}return e.map((e=>resolve(e)))}(e.dir),s=e.maxAge||getEnv("IPX_FS_MAX_AGE"),a=cachedPromise((()=>import("node:fs/promises").catch((()=>{throw createError$1({statusCode:500,statusText:"IPX_FILESYSTEM_ERROR",message:"Failed to resolve filesystem module"})})))),resolveFile=async e=>{const s=await a();for(const a of t){const t=join(a,e);if(!isValidPath(t)||!t.startsWith(a))throw createError$1({statusCode:403,statusText:"IPX_FORBIDDEN_PATH",message:`Forbidden path: ${e}`});try{const e=await s.stat(t);if(!e.isFile())continue;return{stats:e,read:()=>s.readFile(t)}}catch(t){if("ENOENT"===t.code)continue;throw createError$1({statusCode:403,statusText:"IPX_FORBIDDEN_FILE",message:`Cannot access file: ${e}`})}}throw createError$1({statusCode:404,statusText:"IPX_FILE_NOT_FOUND",message:`File not found: ${e}`})};return{name:"ipx:node-fs",async getMeta(e){const{stats:t}=await resolveFile(e);return{mtime:t.mtime,maxAge:s}},async getData(e){const{read:t}=await resolveFile(e);return t()}}}const Un="win32"===e.platform;function isValidPath(e){return Un&&(e=e.slice(parse(e).root.length)),!/["*:<>?|]/.test(e)}const zn=lazyEventHandler((()=>{const e=useRuntimeConfig().ipx||{},t=e?.fs?.dir?(Array.isArray(e.fs.dir)?e.fs.dir:[e.fs.dir]).map((e=>function(e){return rt.test(e)}(e)?e:F(new URL(e,globalThis._importMeta_.url)))):void 0,s=e.fs?.dir?ipxFSStorage({...e.fs,dir:t}):void 0,a=e.http?.domains?ipxHttpStorage({...e.http}):void 0;if(!s&&!a)throw new Error("IPX storage is not configured!");const u=function(e){const t=W(e,{alias:getEnv("IPX_ALIAS")||{},maxAge:getEnv("IPX_MAX_AGE")??60,sharpOptions:{jpegProgressive:!0}});t.alias=Object.fromEntries(Object.entries(t.alias||{}).map((e=>[withLeadingSlash(e[0]),e[1]])));const s=cachedPromise((async()=>await import("./index.mjs").then((function(e){return e.i})).then((e=>e.default||e)))),a=cachedPromise((async()=>{const{optimize:e}=await import("./svgo-node.mjs").then((function(e){return e.s}));return{optimize:e}}));return function(e,u={},c={}){if(!e)throw createError$1({statusCode:400,statusText:"IPX_MISSING_ID",message:"Resource id is missing"});e=hasProtocol(e)?e:withLeadingSlash(e);for(const s in t.alias)e.startsWith(s)&&(e=joinURL(t.alias[s],e.slice(s.length)));const l=hasProtocol(e)?t.httpStorage||t.storage:t.storage||t.httpStorage;if(!l)throw createError$1({statusCode:500,statusText:"IPX_NO_STORAGE",message:"No storage configured!"});const D=cachedPromise((async()=>{const s=await l.getMeta(e,c);if(!s)throw createError$1({statusCode:404,statusText:"IPX_RESOURCE_NOT_FOUND",message:`Resource not found: ${e}`});const a=s.maxAge??t.maxAge;return{maxAge:"string"==typeof a?Number.parseInt(a):a,mtime:s.mtime?new Date(s.mtime):void 0}})),d=cachedPromise((async()=>{const t=await l.getData(e,c);if(!t)throw createError$1({statusCode:404,statusText:"IPX_RESOURCE_NOT_FOUND",message:`Resource not found: ${e}`});return Buffer.from(t)})),h=cachedPromise((async()=>{const c=await d();let l;try{l=imageMeta(c)}catch{throw createError$1({statusCode:400,statusText:"IPX_INVALID_IMAGE",message:`Cannot parse image metadata: ${e}`})}let D=u.f||u.format;"jpg"===D&&(D="jpeg");const h=D&&Ln.has(D)?D:Ln.has(l.type||"")?l.type:"jpeg";if("svg"===l.type&&!D){if(!1===t.svgo)return{data:c,format:"svg+xml",meta:l};{const{optimize:e}=await a();return{data:e(c.toString("utf8"),{...t.svgo,plugins:["removeScriptElement",...t.svgo?.plugins||[]]}).data,format:"svg+xml",meta:l}}}const f=void 0!==u.animated||void 0!==u.a||"gif"===h;let g=(await s())(c,{animated:f,...t.sharpOptions});Object.assign(g.options,t.sharpOptions);const m=Object.entries(u).map((([e,t])=>{return{handler:(s=e,tn[s]),name:e,args:t};var s})).filter((e=>e.handler)).sort(((e,t)=>{const s=(e.handler.order||e.name||"").toString(),a=(t.handler.order||t.name||"").toString();return s.localeCompare(a)})),F={meta:l};for(const e of m)g=applyHandler(F,g,e.handler,e.args)||g;return Ln.has(h||"")&&(g=g.toFormat(h,{quality:F.quality})),{data:await g.toBuffer(),format:h,meta:l}}));return{getSourceMeta:D,process:h}}}({...e,storage:s||a,httpStorage:a}),c=createIPXH3Handler(u);return l=e.baseURL,D=c,(l=withoutTrailingSlash(l))&&"/"!==l?le((async e=>{e.node.req.originalUrl=e.node.req.originalUrl||e.node.req.url||"/";const t=e._path||e.node.req.url||"/";e._path=withoutBase(e.path||"/",l),e.node.req.url=e._path;try{return await D(e)}finally{e._path=e.node.req.url=t}})):D;var l,D})),_lazy_hXUA_D=()=>import("../routes/renderer.mjs").then((function(e){return e.j})),qn=[{route:"/__nuxt_error",handler:_lazy_hXUA_D,lazy:!0,middleware:!1,method:void 0},{route:"/api/_nuxt_icon/:collection",handler:Zt,lazy:!1,middleware:!1,method:void 0},{route:"/__nuxt_island/**",handler:er,lazy:!1,middleware:!1,method:void 0},{route:"/_ipx/**",handler:zn,lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:_lazy_hXUA_D,lazy:!0,middleware:!1,method:void 0}];const Wn=function(){const e=useRuntimeConfig(),t=createHooks(),captureError=(e,s={})=>{const a=t.callHookParallel("error",e,s).catch((e=>{console.error("Error while capturing another error",e)}));if(s.event&&isEvent(s.event)){const t=s.event.context.nitro?.errors;t&&t.push({error:e,context:s}),s.event.waitUntil&&s.event.waitUntil(a)}},s=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),async function(e,t){for(const s of Ze)try{if(await s(e,t,{defaultHandler:defaultHandler}),t.handled)return}catch(e){console.error(e)}}(e,t)),onRequest:async e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t?._platform&&(e.context={_platform:t?._platform,...t._platform,...e.context}),!e.context.waitUntil&&t?.waitUntil&&(e.context.waitUntil=t.waitUntil),e.fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:localFetch}),e.$fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:c}),e.waitUntil=t=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(t),e.context.waitUntil&&e.context.waitUntil(t)},e.captureError=(t,s)=>{captureError(t,{event:e,...s})},await Wn.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await Wn.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await Wn.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),a=function(e={}){const t=createRouter$1({}),s={};let a;const u={},addRoute=(e,a,c)=>{let l=s[e];if(l||(s[e]=l={path:e,handlers:{}},t.insert(e,l)),Array.isArray(c))for(const t of c)addRoute(e,a,t);else l.handlers[c]=toEventHandler(a,0,e);return u};u.use=u.add=(e,t,s)=>addRoute(e,t,s||"all");for(const e of De)u[e]=(t,s)=>u.add(t,s,e);const matchHandler=(e="/",s="get")=>{const u=e.indexOf("?");-1!==u&&(e=e.slice(0,Math.max(0,u)));const c=t.lookup(e);if(!c||!c.handlers)return{error:createError$1({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let l=c.handlers[s]||c.handlers.all;if(!l){a||(a=toRouteMatcher(t));const u=a.matchAll(e).reverse();for(const e of u){if(e.handlers[s]){l=e.handlers[s],c.handlers[s]=c.handlers[s]||l;break}if(e.handlers.all){l=e.handlers.all,c.handlers.all=c.handlers.all||l;break}}}return l?{matched:c,handler:l}:{error:createError$1({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${s} is not allowed on this route.`})}},c=e.preemptive||e.preemtive;return u.handler=le((e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(c)throw t.error;return}e.context.matchedRoute=t.matched;const s=t.matched.params||{};return e.context.params=s,Promise.resolve(t.handler(e)).then((e=>void 0===e&&c?null:e))})),u.handler.__resolve__=async e=>{e=withLeadingSlash(e);const t=matchHandler(e);if("error"in t)return;let s={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const a=await t.handler.__resolve__(e);if(!a)return;s={...s,...a}}return s},u}({preemptive:!0}),u=toNodeListener(s),localFetch=(e,t)=>e.toString().startsWith("/")?async function(e,t,s={}){try{const a=await b$2(e,{url:t,...s});return new Response(a.body,{status:a.status,statusText:a.statusText,headers:S$1(a.headers)})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}(u,e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))):globalThis.fetch(e,t),c=createFetch({fetch:localFetch,Headers:be,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=c,s.use(createRouteRulesHandler({localFetch:localFetch}));for(const t of qn){let u=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const a=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");s.use(a,u)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(u=Le(u,{group:"nitro/routes",...e.cache})),a.use(t.route,u,t.method)}}return s.use(e.app.baseURL,a.handler),{hooks:t,h3App:s,router:a,localCall:e=>b$2(u,e),localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return Wn}!function(e){for(const t of et)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(Wn);export{sanitizeStatusCode as A,getContext as B,pe as C,fe as D,ge as E,baseURL as F,withBase as G,destr as H,executeAsync as I,toRouteMatcher as J,createRouter$1 as K,hash$1 as L,serialize$1 as M,isEqual as N,withTrailingSlash as O,withoutTrailingSlash as P,useRuntimeConfig as a,buildAssetsURL as b,createHooks as c,defineRenderHandler as d,publicAssetsURL as e,getQuery as f,getDefaultExportFromNamespaceIfNotNamed as g,createError$1 as h,getRouteRules as i,getResponseStatusText as j,getResponseStatus as k,Pr as l,getDefaultExportFromCjs as m,V as n,klona as o,parseQuery as p,W as q,Wr as r,createDefu$1 as s,toNodeListener as t,useNitroApp as u,hasProtocol as v,withLeadingSlash as w,isScriptProtocol as x,joinURL as y,withQuery as z};
//# sourceMappingURL=nitro.mjs.map
